{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n}; // Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\n\nimport Cookies from 'universal-cookie';\nimport { browserOrNode } from '../JS';\nvar isBrowser = browserOrNode().isBrowser;\nvar ONE_YEAR_IN_MS = 365 * 24 * 60 * 60 * 1000;\n\nvar UniversalStorage =\n/** @class */\nfunction () {\n  function UniversalStorage(context) {\n    if (context === void 0) {\n      context = {};\n    }\n\n    this.cookies = new Cookies();\n    this.store = isBrowser ? window.localStorage : Object.create(null);\n    this.cookies = context.req ? new Cookies(decodeURIComponent(context.req.headers.cookie)) : new Cookies();\n    Object.assign(this.store, this.cookies.getAll());\n  }\n\n  Object.defineProperty(UniversalStorage.prototype, \"length\", {\n    get: function () {\n      return Object.entries(this.store).length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  UniversalStorage.prototype.clear = function () {\n    var _this = this;\n\n    Array.from(new Array(this.length)).map(function (_, i) {\n      return _this.key(i);\n    }).forEach(function (key) {\n      return _this.removeItem(key);\n    });\n  };\n\n  UniversalStorage.prototype.getItem = function (key) {\n    return this.getLocalItem(key);\n  };\n\n  UniversalStorage.prototype.getLocalItem = function (key) {\n    return Object.prototype.hasOwnProperty.call(this.store, key) ? this.store[key] : null;\n  };\n\n  UniversalStorage.prototype.getUniversalItem = function (key) {\n    return this.cookies.get(key);\n  };\n\n  UniversalStorage.prototype.key = function (index) {\n    return Object.keys(this.store)[index];\n  };\n\n  UniversalStorage.prototype.removeItem = function (key) {\n    this.removeLocalItem(key);\n    this.removeUniversalItem(key);\n  };\n\n  UniversalStorage.prototype.removeLocalItem = function (key) {\n    delete this.store[key];\n  };\n\n  UniversalStorage.prototype.removeUniversalItem = function (key) {\n    this.cookies.remove(key, {\n      path: '/'\n    });\n  };\n\n  UniversalStorage.prototype.setItem = function (key, value) {\n    this.setLocalItem(key, value); // keys take the shape:\n    //  1. `${ProviderPrefix}.${userPoolClientId}.${username}.${tokenType}\n    //  2. `${ProviderPrefix}.${userPoolClientId}.LastAuthUser\n\n    var tokenType = key.split('.').pop();\n    var sessionTokenTypes = ['LastAuthUser', 'accessToken', // refreshToken originates on the client, but SSR pages won't fail when this expires\n    // Note: the new `accessToken` will also be refreshed on the client (since Amplify doesn't set server-side cookies)\n    'refreshToken', // Required for CognitoUserSession\n    'idToken' // userData is used when `Auth.currentAuthenticatedUser({ bypassCache: false })`.\n    // Can be persisted to speed up calls to `Auth.currentAuthenticatedUser()`\n    // 'userData',\n    // Ignoring clockDrift on the server for now, but needs testing\n    // 'clockDrift',\n    ];\n\n    if (sessionTokenTypes.includes(tokenType !== null && tokenType !== void 0 ? tokenType : '')) {\n      this.setUniversalItem(key, value, {\n        expires: new Date(Date.now() + ONE_YEAR_IN_MS)\n      });\n    }\n  };\n\n  UniversalStorage.prototype.setLocalItem = function (key, value) {\n    this.store[key] = value;\n  };\n\n  UniversalStorage.prototype.setUniversalItem = function (key, value, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.cookies.set(key, value, __assign(__assign({}, options), {\n      path: '/',\n      // `httpOnly` cannot be set via JavaScript: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#JavaScript_access_using_Document.cookie\n      sameSite: true,\n      // Allow unsecure requests to http://localhost:3000/ when in development.\n      secure: isBrowser && window.location.hostname === 'localhost' ? false : true\n    }));\n  };\n\n  return UniversalStorage;\n}();\n\nexport { UniversalStorage };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","Cookies","browserOrNode","isBrowser","ONE_YEAR_IN_MS","UniversalStorage","context","cookies","store","window","localStorage","create","req","decodeURIComponent","headers","cookie","getAll","defineProperty","get","entries","enumerable","configurable","clear","_this","Array","from","map","_","key","forEach","removeItem","getItem","getLocalItem","getUniversalItem","index","keys","removeLocalItem","removeUniversalItem","remove","path","setItem","value","setLocalItem","tokenType","split","pop","sessionTokenTypes","includes","setUniversalItem","expires","Date","now","options","set","sameSite","secure","location","hostname"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-amplify/core/lib-esm/UniversalStorage/index.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport Cookies from 'universal-cookie';\nimport { browserOrNode } from '../JS';\nvar isBrowser = browserOrNode().isBrowser;\nvar ONE_YEAR_IN_MS = 365 * 24 * 60 * 60 * 1000;\nvar UniversalStorage = /** @class */ (function () {\n    function UniversalStorage(context) {\n        if (context === void 0) { context = {}; }\n        this.cookies = new Cookies();\n        this.store = isBrowser ? window.localStorage : Object.create(null);\n        this.cookies = context.req\n            ? new Cookies(decodeURIComponent(context.req.headers.cookie))\n            : new Cookies();\n        Object.assign(this.store, this.cookies.getAll());\n    }\n    Object.defineProperty(UniversalStorage.prototype, \"length\", {\n        get: function () {\n            return Object.entries(this.store).length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    UniversalStorage.prototype.clear = function () {\n        var _this = this;\n        Array.from(new Array(this.length))\n            .map(function (_, i) { return _this.key(i); })\n            .forEach(function (key) { return _this.removeItem(key); });\n    };\n    UniversalStorage.prototype.getItem = function (key) {\n        return this.getLocalItem(key);\n    };\n    UniversalStorage.prototype.getLocalItem = function (key) {\n        return Object.prototype.hasOwnProperty.call(this.store, key)\n            ? this.store[key]\n            : null;\n    };\n    UniversalStorage.prototype.getUniversalItem = function (key) {\n        return this.cookies.get(key);\n    };\n    UniversalStorage.prototype.key = function (index) {\n        return Object.keys(this.store)[index];\n    };\n    UniversalStorage.prototype.removeItem = function (key) {\n        this.removeLocalItem(key);\n        this.removeUniversalItem(key);\n    };\n    UniversalStorage.prototype.removeLocalItem = function (key) {\n        delete this.store[key];\n    };\n    UniversalStorage.prototype.removeUniversalItem = function (key) {\n        this.cookies.remove(key, {\n            path: '/',\n        });\n    };\n    UniversalStorage.prototype.setItem = function (key, value) {\n        this.setLocalItem(key, value);\n        // keys take the shape:\n        //  1. `${ProviderPrefix}.${userPoolClientId}.${username}.${tokenType}\n        //  2. `${ProviderPrefix}.${userPoolClientId}.LastAuthUser\n        var tokenType = key.split('.').pop();\n        var sessionTokenTypes = [\n            'LastAuthUser',\n            'accessToken',\n            // refreshToken originates on the client, but SSR pages won't fail when this expires\n            // Note: the new `accessToken` will also be refreshed on the client (since Amplify doesn't set server-side cookies)\n            'refreshToken',\n            // Required for CognitoUserSession\n            'idToken',\n            // userData is used when `Auth.currentAuthenticatedUser({ bypassCache: false })`.\n            // Can be persisted to speed up calls to `Auth.currentAuthenticatedUser()`\n            // 'userData',\n            // Ignoring clockDrift on the server for now, but needs testing\n            // 'clockDrift',\n        ];\n        if (sessionTokenTypes.includes(tokenType !== null && tokenType !== void 0 ? tokenType : '')) {\n            this.setUniversalItem(key, value, {\n                expires: new Date(Date.now() + ONE_YEAR_IN_MS),\n            });\n        }\n    };\n    UniversalStorage.prototype.setLocalItem = function (key, value) {\n        this.store[key] = value;\n    };\n    UniversalStorage.prototype.setUniversalItem = function (key, value, options) {\n        if (options === void 0) { options = {}; }\n        this.cookies.set(key, value, __assign(__assign({}, options), { path: '/', \n            // `httpOnly` cannot be set via JavaScript: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#JavaScript_access_using_Document.cookie\n            sameSite: true, \n            // Allow unsecure requests to http://localhost:3000/ when in development.\n            secure: isBrowser && window.location.hostname === 'localhost' ? false : true }));\n    };\n    return UniversalStorage;\n}());\nexport { UniversalStorage };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}