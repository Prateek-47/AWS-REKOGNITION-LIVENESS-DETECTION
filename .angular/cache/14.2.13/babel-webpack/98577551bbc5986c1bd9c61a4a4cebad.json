{"ast":null,"code":"import _asyncToGenerator from \"D:/aws-rekognition-liveness-detection-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { isWebSocketRequest } from \"./utils\";\nexport class WebsocketSignatureV4 {\n  constructor(options) {\n    this.signer = options.signer;\n  }\n\n  presign(originalRequest, options = {}) {\n    return this.signer.presign(originalRequest, options);\n  }\n\n  sign(toSign, options) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (HttpRequest.isInstance(toSign) && isWebSocketRequest(toSign)) {\n        const signedRequest = yield _this.signer.presign({ ...toSign,\n          body: \"\"\n        }, {\n          expiresIn: 60,\n          unsignableHeaders: new Set(Object.keys(toSign.headers).filter(header => header !== \"host\"))\n        });\n        return { ...signedRequest,\n          body: toSign.body\n        };\n      } else {\n        return _this.signer.sign(toSign, options);\n      }\n    })();\n  }\n\n}","map":{"version":3,"names":["HttpRequest","isWebSocketRequest","WebsocketSignatureV4","constructor","options","signer","presign","originalRequest","sign","toSign","isInstance","signedRequest","body","expiresIn","unsignableHeaders","Set","Object","keys","headers","filter","header"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-sdk/middleware-websocket/dist-es/WebsocketSignatureV4.js"],"sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { isWebSocketRequest } from \"./utils\";\nexport class WebsocketSignatureV4 {\n    constructor(options) {\n        this.signer = options.signer;\n    }\n    presign(originalRequest, options = {}) {\n        return this.signer.presign(originalRequest, options);\n    }\n    async sign(toSign, options) {\n        if (HttpRequest.isInstance(toSign) && isWebSocketRequest(toSign)) {\n            const signedRequest = await this.signer.presign({ ...toSign, body: \"\" }, {\n                expiresIn: 60,\n                unsignableHeaders: new Set(Object.keys(toSign.headers).filter((header) => header !== \"host\")),\n            });\n            return {\n                ...signedRequest,\n                body: toSign.body,\n            };\n        }\n        else {\n            return this.signer.sign(toSign, options);\n        }\n    }\n}\n"],"mappings":";AAAA,SAASA,WAAT,QAA4B,wBAA5B;AACA,SAASC,kBAAT,QAAmC,SAAnC;AACA,OAAO,MAAMC,oBAAN,CAA2B;EAC9BC,WAAW,CAACC,OAAD,EAAU;IACjB,KAAKC,MAAL,GAAcD,OAAO,CAACC,MAAtB;EACH;;EACDC,OAAO,CAACC,eAAD,EAAkBH,OAAO,GAAG,EAA5B,EAAgC;IACnC,OAAO,KAAKC,MAAL,CAAYC,OAAZ,CAAoBC,eAApB,EAAqCH,OAArC,CAAP;EACH;;EACKI,IAAI,CAACC,MAAD,EAASL,OAAT,EAAkB;IAAA;;IAAA;MACxB,IAAIJ,WAAW,CAACU,UAAZ,CAAuBD,MAAvB,KAAkCR,kBAAkB,CAACQ,MAAD,CAAxD,EAAkE;QAC9D,MAAME,aAAa,SAAS,KAAI,CAACN,MAAL,CAAYC,OAAZ,CAAoB,EAAE,GAAGG,MAAL;UAAaG,IAAI,EAAE;QAAnB,CAApB,EAA6C;UACrEC,SAAS,EAAE,EAD0D;UAErEC,iBAAiB,EAAE,IAAIC,GAAJ,CAAQC,MAAM,CAACC,IAAP,CAAYR,MAAM,CAACS,OAAnB,EAA4BC,MAA5B,CAAoCC,MAAD,IAAYA,MAAM,KAAK,MAA1D,CAAR;QAFkD,CAA7C,CAA5B;QAIA,OAAO,EACH,GAAGT,aADA;UAEHC,IAAI,EAAEH,MAAM,CAACG;QAFV,CAAP;MAIH,CATD,MAUK;QACD,OAAO,KAAI,CAACP,MAAL,CAAYG,IAAZ,CAAiBC,MAAjB,EAAyBL,OAAzB,CAAP;MACH;IAbuB;EAc3B;;AArB6B"},"metadata":{},"sourceType":"module"}