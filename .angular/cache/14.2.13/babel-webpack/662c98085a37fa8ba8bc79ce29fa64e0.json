{"ast":null,"code":"import _asyncToGenerator from \"D:/aws-rekognition-liveness-detection-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { getUserAgentPrefix } from \"@aws-sdk/util-endpoints\";\nimport { SPACE, UA_ESCAPE_CHAR, UA_NAME_ESCAPE_REGEX, UA_NAME_SEPARATOR, UA_VALUE_ESCAPE_REGEX, USER_AGENT, X_AMZ_USER_AGENT } from \"./constants\";\nexport const userAgentMiddleware = options => (next, context) => /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (args) {\n    const {\n      request\n    } = args;\n    if (!HttpRequest.isInstance(request)) return next(args);\n    const {\n      headers\n    } = request;\n    const userAgent = context?.userAgent?.map(escapeUserAgent) || [];\n    const defaultUserAgent = (yield options.defaultUserAgentProvider()).map(escapeUserAgent);\n    const customUserAgent = options?.customUserAgent?.map(escapeUserAgent) || [];\n    const prefix = getUserAgentPrefix();\n    const sdkUserAgentValue = (prefix ? [prefix] : []).concat([...defaultUserAgent, ...userAgent, ...customUserAgent]).join(SPACE);\n    const normalUAValue = [...defaultUserAgent.filter(section => section.startsWith(\"aws-sdk-\")), ...customUserAgent].join(SPACE);\n\n    if (options.runtime !== \"browser\") {\n      if (normalUAValue) {\n        headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT] ? `${headers[USER_AGENT]} ${normalUAValue}` : normalUAValue;\n      }\n\n      headers[USER_AGENT] = sdkUserAgentValue;\n    } else {\n      headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;\n    }\n\n    return next({ ...args,\n      request\n    });\n  });\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nconst escapeUserAgent = userAgentPair => {\n  const name = userAgentPair[0].split(UA_NAME_SEPARATOR).map(part => part.replace(UA_NAME_ESCAPE_REGEX, UA_ESCAPE_CHAR)).join(UA_NAME_SEPARATOR);\n  const version = userAgentPair[1]?.replace(UA_VALUE_ESCAPE_REGEX, UA_ESCAPE_CHAR);\n  const prefixSeparatorIndex = name.indexOf(UA_NAME_SEPARATOR);\n  const prefix = name.substring(0, prefixSeparatorIndex);\n  let uaName = name.substring(prefixSeparatorIndex + 1);\n\n  if (prefix === \"api\") {\n    uaName = uaName.toLowerCase();\n  }\n\n  return [prefix, uaName, version].filter(item => item && item.length > 0).reduce((acc, item, index) => {\n    switch (index) {\n      case 0:\n        return item;\n\n      case 1:\n        return `${acc}/${item}`;\n\n      default:\n        return `${acc}#${item}`;\n    }\n  }, \"\");\n};\n\nexport const getUserAgentMiddlewareOptions = {\n  name: \"getUserAgentMiddleware\",\n  step: \"build\",\n  priority: \"low\",\n  tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n  override: true\n};\nexport const getUserAgentPlugin = config => ({\n  applyToStack: clientStack => {\n    clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n  }\n});","map":{"version":3,"names":["HttpRequest","getUserAgentPrefix","SPACE","UA_ESCAPE_CHAR","UA_NAME_ESCAPE_REGEX","UA_NAME_SEPARATOR","UA_VALUE_ESCAPE_REGEX","USER_AGENT","X_AMZ_USER_AGENT","userAgentMiddleware","options","next","context","args","request","isInstance","headers","userAgent","map","escapeUserAgent","defaultUserAgent","defaultUserAgentProvider","customUserAgent","prefix","sdkUserAgentValue","concat","join","normalUAValue","filter","section","startsWith","runtime","userAgentPair","name","split","part","replace","version","prefixSeparatorIndex","indexOf","substring","uaName","toLowerCase","item","length","reduce","acc","index","getUserAgentMiddlewareOptions","step","priority","tags","override","getUserAgentPlugin","config","applyToStack","clientStack","add"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-sdk/middleware-user-agent/dist-es/user-agent-middleware.js"],"sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { getUserAgentPrefix } from \"@aws-sdk/util-endpoints\";\nimport { SPACE, UA_ESCAPE_CHAR, UA_NAME_ESCAPE_REGEX, UA_NAME_SEPARATOR, UA_VALUE_ESCAPE_REGEX, USER_AGENT, X_AMZ_USER_AGENT, } from \"./constants\";\nexport const userAgentMiddleware = (options) => (next, context) => async (args) => {\n    const { request } = args;\n    if (!HttpRequest.isInstance(request))\n        return next(args);\n    const { headers } = request;\n    const userAgent = context?.userAgent?.map(escapeUserAgent) || [];\n    const defaultUserAgent = (await options.defaultUserAgentProvider()).map(escapeUserAgent);\n    const customUserAgent = options?.customUserAgent?.map(escapeUserAgent) || [];\n    const prefix = getUserAgentPrefix();\n    const sdkUserAgentValue = (prefix ? [prefix] : [])\n        .concat([...defaultUserAgent, ...userAgent, ...customUserAgent])\n        .join(SPACE);\n    const normalUAValue = [\n        ...defaultUserAgent.filter((section) => section.startsWith(\"aws-sdk-\")),\n        ...customUserAgent,\n    ].join(SPACE);\n    if (options.runtime !== \"browser\") {\n        if (normalUAValue) {\n            headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT]\n                ? `${headers[USER_AGENT]} ${normalUAValue}`\n                : normalUAValue;\n        }\n        headers[USER_AGENT] = sdkUserAgentValue;\n    }\n    else {\n        headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;\n    }\n    return next({\n        ...args,\n        request,\n    });\n};\nconst escapeUserAgent = (userAgentPair) => {\n    const name = userAgentPair[0]\n        .split(UA_NAME_SEPARATOR)\n        .map((part) => part.replace(UA_NAME_ESCAPE_REGEX, UA_ESCAPE_CHAR))\n        .join(UA_NAME_SEPARATOR);\n    const version = userAgentPair[1]?.replace(UA_VALUE_ESCAPE_REGEX, UA_ESCAPE_CHAR);\n    const prefixSeparatorIndex = name.indexOf(UA_NAME_SEPARATOR);\n    const prefix = name.substring(0, prefixSeparatorIndex);\n    let uaName = name.substring(prefixSeparatorIndex + 1);\n    if (prefix === \"api\") {\n        uaName = uaName.toLowerCase();\n    }\n    return [prefix, uaName, version]\n        .filter((item) => item && item.length > 0)\n        .reduce((acc, item, index) => {\n        switch (index) {\n            case 0:\n                return item;\n            case 1:\n                return `${acc}/${item}`;\n            default:\n                return `${acc}#${item}`;\n        }\n    }, \"\");\n};\nexport const getUserAgentMiddlewareOptions = {\n    name: \"getUserAgentMiddleware\",\n    step: \"build\",\n    priority: \"low\",\n    tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n    override: true,\n};\nexport const getUserAgentPlugin = (config) => ({\n    applyToStack: (clientStack) => {\n        clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n    },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}