{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getCurrTime, getByteLength, defaultConfig, isInteger } from './Utils';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('StorageCache');\n/**\n * Initialization of the cache\n *\n */\n\nvar StorageCache =\n/** @class */\nfunction () {\n  /**\n   * Initialize the cache\n   * @param config - the configuration of the cache\n   */\n  function StorageCache(config) {\n    this.config = Object.assign({}, config);\n    this.cacheCurSizeKey = this.config.keyPrefix + 'CurSize';\n    this.checkConfig();\n  }\n\n  StorageCache.prototype.getModuleName = function () {\n    return 'Cache';\n  };\n\n  StorageCache.prototype.checkConfig = function () {\n    // check configuration\n    if (!isInteger(this.config.capacityInBytes)) {\n      logger.error('Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default.');\n      this.config.capacityInBytes = defaultConfig.capacityInBytes;\n    }\n\n    if (!isInteger(this.config.itemMaxSize)) {\n      logger.error('Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default.');\n      this.config.itemMaxSize = defaultConfig.itemMaxSize;\n    }\n\n    if (!isInteger(this.config.defaultTTL)) {\n      logger.error('Invalid parameter: defaultTTL. It should be an Integer. Setting back to default.');\n      this.config.defaultTTL = defaultConfig.defaultTTL;\n    }\n\n    if (!isInteger(this.config.defaultPriority)) {\n      logger.error('Invalid parameter: defaultPriority. It should be an Integer. Setting back to default.');\n      this.config.defaultPriority = defaultConfig.defaultPriority;\n    }\n\n    if (this.config.itemMaxSize > this.config.capacityInBytes) {\n      logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');\n      this.config.itemMaxSize = defaultConfig.itemMaxSize;\n    }\n\n    if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\n      logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');\n      this.config.defaultPriority = defaultConfig.defaultPriority;\n    }\n\n    if (Number(this.config.warningThreshold) > 1 || Number(this.config.warningThreshold) < 0) {\n      logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');\n      this.config.warningThreshold = defaultConfig.warningThreshold;\n    } // set 5MB limit\n\n\n    var cacheLimit = 5 * 1024 * 1024;\n\n    if (this.config.capacityInBytes > cacheLimit) {\n      logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');\n      this.config.capacityInBytes = defaultConfig.capacityInBytes;\n    }\n  };\n  /**\n   * produce a JSON object with meta-data and data value\n   * @param value - the value of the item\n   * @param options - optional, the specified meta-data\n   *\n   * @return - the item which has the meta-data and the value\n   */\n\n\n  StorageCache.prototype.fillCacheItem = function (key, value, options) {\n    var ret = {\n      key: key,\n      data: value,\n      timestamp: getCurrTime(),\n      visitedTime: getCurrTime(),\n      priority: options.priority,\n      expires: options.expires,\n      type: typeof value,\n      byteSize: 0\n    };\n    ret.byteSize = getByteLength(JSON.stringify(ret)); // for accurate size\n\n    ret.byteSize = getByteLength(JSON.stringify(ret));\n    return ret;\n  };\n  /**\n   * set cache with customized configuration\n   * @param config - customized configuration\n   *\n   * @return - the current configuration\n   */\n\n\n  StorageCache.prototype.configure = function (config) {\n    if (!config) {\n      return this.config;\n    }\n\n    if (config.keyPrefix) {\n      logger.warn(\"Don't try to configure keyPrefix!\");\n    }\n\n    this.config = Object.assign({}, this.config, config, config.Cache);\n    this.checkConfig();\n    return this.config;\n  };\n\n  return StorageCache;\n}();\n\nexport { StorageCache };","map":{"version":3,"names":["getCurrTime","getByteLength","defaultConfig","isInteger","ConsoleLogger","Logger","logger","StorageCache","config","Object","assign","cacheCurSizeKey","keyPrefix","checkConfig","prototype","getModuleName","capacityInBytes","error","itemMaxSize","defaultTTL","defaultPriority","Number","warningThreshold","cacheLimit","fillCacheItem","key","value","options","ret","data","timestamp","visitedTime","priority","expires","type","byteSize","JSON","stringify","configure","warn","Cache"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-amplify/cache/lib-esm/StorageCache.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getCurrTime, getByteLength, defaultConfig, isInteger } from './Utils';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('StorageCache');\n/**\n * Initialization of the cache\n *\n */\nvar StorageCache = /** @class */ (function () {\n    /**\n     * Initialize the cache\n     * @param config - the configuration of the cache\n     */\n    function StorageCache(config) {\n        this.config = Object.assign({}, config);\n        this.cacheCurSizeKey = this.config.keyPrefix + 'CurSize';\n        this.checkConfig();\n    }\n    StorageCache.prototype.getModuleName = function () {\n        return 'Cache';\n    };\n    StorageCache.prototype.checkConfig = function () {\n        // check configuration\n        if (!isInteger(this.config.capacityInBytes)) {\n            logger.error('Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default.');\n            this.config.capacityInBytes = defaultConfig.capacityInBytes;\n        }\n        if (!isInteger(this.config.itemMaxSize)) {\n            logger.error('Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default.');\n            this.config.itemMaxSize = defaultConfig.itemMaxSize;\n        }\n        if (!isInteger(this.config.defaultTTL)) {\n            logger.error('Invalid parameter: defaultTTL. It should be an Integer. Setting back to default.');\n            this.config.defaultTTL = defaultConfig.defaultTTL;\n        }\n        if (!isInteger(this.config.defaultPriority)) {\n            logger.error('Invalid parameter: defaultPriority. It should be an Integer. Setting back to default.');\n            this.config.defaultPriority = defaultConfig.defaultPriority;\n        }\n        if (this.config.itemMaxSize > this.config.capacityInBytes) {\n            logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');\n            this.config.itemMaxSize = defaultConfig.itemMaxSize;\n        }\n        if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\n            logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');\n            this.config.defaultPriority = defaultConfig.defaultPriority;\n        }\n        if (Number(this.config.warningThreshold) > 1 ||\n            Number(this.config.warningThreshold) < 0) {\n            logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');\n            this.config.warningThreshold = defaultConfig.warningThreshold;\n        }\n        // set 5MB limit\n        var cacheLimit = 5 * 1024 * 1024;\n        if (this.config.capacityInBytes > cacheLimit) {\n            logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');\n            this.config.capacityInBytes = defaultConfig.capacityInBytes;\n        }\n    };\n    /**\n     * produce a JSON object with meta-data and data value\n     * @param value - the value of the item\n     * @param options - optional, the specified meta-data\n     *\n     * @return - the item which has the meta-data and the value\n     */\n    StorageCache.prototype.fillCacheItem = function (key, value, options) {\n        var ret = {\n            key: key,\n            data: value,\n            timestamp: getCurrTime(),\n            visitedTime: getCurrTime(),\n            priority: options.priority,\n            expires: options.expires,\n            type: typeof value,\n            byteSize: 0,\n        };\n        ret.byteSize = getByteLength(JSON.stringify(ret));\n        // for accurate size\n        ret.byteSize = getByteLength(JSON.stringify(ret));\n        return ret;\n    };\n    /**\n     * set cache with customized configuration\n     * @param config - customized configuration\n     *\n     * @return - the current configuration\n     */\n    StorageCache.prototype.configure = function (config) {\n        if (!config) {\n            return this.config;\n        }\n        if (config.keyPrefix) {\n            logger.warn(\"Don't try to configure keyPrefix!\");\n        }\n        this.config = Object.assign({}, this.config, config, config.Cache);\n        this.checkConfig();\n        return this.config;\n    };\n    return StorageCache;\n}());\nexport { StorageCache };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}