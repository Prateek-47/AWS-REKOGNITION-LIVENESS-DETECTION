{"ast":null,"code":"import { __awaiter as t } from \"tslib\";\nimport { Hub as e } from \"aws-amplify\";\nimport { appendToCognitoUserAgent as n } from \"@aws-amplify/auth\";\nimport { waitFor as i } from \"xstate/lib/waitFor.js\";\nimport { ALLOWED_SPECIAL_CHARACTERS as a } from \"./constants.mjs\";\nimport { getActorState as o } from \"./actor.mjs\";\nimport { isFunction as s } from \"../../utils/index.mjs\";\n\nconst r = ({\n  packageName: t,\n  version: e\n}) => {\n  n(`${t}/${e}`);\n},\n      c = t => {\n  const e = t.trim().split(\"\");\n\n  for (let t = 0; t < e.length; t++) t > 0 && t < e.length - 1 && (e[t] = \"*\");\n\n  return e.join(\"\");\n},\n      l = t => {\n  if (t.length < 4) return t;\n  const e = t.split(\"\");\n\n  for (let t = 0; t < e.length - 4; t++) e[t] = \"*\";\n\n  return e.join(\"\");\n},\n      u = e => t(void 0, void 0, void 0, function* () {\n  try {\n    yield i(e, t => o(t).matches(\"autoSignIn\"));\n  } catch (t) {}\n}),\n      m = ({\n  payload: {\n    data: e,\n    event: n\n  }\n}, i, a) => t(void 0, void 0, void 0, function* () {\n  const {\n    send: t\n  } = i,\n        r = i.getSnapshot(),\n        {\n    onSignIn: c,\n    onSignOut: l\n  } = null != a ? a : {};\n\n  switch (n) {\n    case \"tokenRefresh\":\n      r.matches(\"authenticated.idle\") && t(\"TOKEN_REFRESH\");\n      break;\n\n    case \"autoSignIn\":\n      if (!r.matches(\"authenticated\")) {\n        yield u(i);\n        const n = o(i.getSnapshot());\n        (null == n ? void 0 : n.matches(\"autoSignIn\")) && t({\n          type: \"AUTO_SIGN_IN\",\n          data: e\n        });\n      }\n\n      break;\n\n    case \"autoSignIn_failure\":\n      {\n        yield u(i);\n        const n = o(i.getSnapshot());\n        (null == n ? void 0 : n.matches(\"autoSignIn\")) && t({\n          type: \"AUTO_SIGN_IN_FAILURE\",\n          data: e\n        });\n        break;\n      }\n\n    case \"signIn\":\n      s(c) && c();\n      break;\n\n    case \"signOut\":\n    case \"tokenRefresh_failure\":\n      s(l) && l(), r.matches(\"authenticated.idle\") && t(\"SIGN_OUT\");\n  }\n}),\n      d = (t, n = m) => e.listen(\"auth\", ((t, e) => n => {\n  e(n, t);\n})(t, n), \"authenticator-hub-handler\"),\n      h = t => a.some(e => t.includes(e)),\n      p = (t, e, n) => encodeURI(`otpauth://totp/${t}:${e}?secret=${n}&issuer=${t}`);\n\nfunction f(t, ...e) {\n  return Object.entries(t).reduce((t, [n, i]) => Object.assign(Object.assign({}, t), {\n    [n]: e.includes(n) ? i : null == i ? void 0 : i.trim()\n  }), {});\n}\n\nexport { c as censorAllButFirstAndLast, l as censorPhoneNumber, r as configureComponent, m as defaultAuthHubHandler, p as getTotpCodeURL, h as hasSpecialChars, d as listenToAuthHub, f as trimValues };","map":{"version":3,"names":["__awaiter","t","Hub","e","appendToCognitoUserAgent","n","waitFor","i","ALLOWED_SPECIAL_CHARACTERS","a","getActorState","o","isFunction","s","r","packageName","version","c","trim","split","length","join","l","u","matches","m","payload","data","event","send","getSnapshot","onSignIn","onSignOut","type","d","listen","h","some","includes","p","encodeURI","f","Object","entries","reduce","assign","censorAllButFirstAndLast","censorPhoneNumber","configureComponent","defaultAuthHubHandler","getTotpCodeURL","hasSpecialChars","listenToAuthHub","trimValues"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-amplify/ui/dist/esm/helpers/authenticator/utils.mjs"],"sourcesContent":["import{__awaiter as t}from\"tslib\";import{Hub as e}from\"aws-amplify\";import{appendToCognitoUserAgent as n}from\"@aws-amplify/auth\";import{waitFor as i}from\"xstate/lib/waitFor.js\";import{ALLOWED_SPECIAL_CHARACTERS as a}from\"./constants.mjs\";import{getActorState as o}from\"./actor.mjs\";import{isFunction as s}from\"../../utils/index.mjs\";const r=({packageName:t,version:e})=>{n(`${t}/${e}`)},c=t=>{const e=t.trim().split(\"\");for(let t=0;t<e.length;t++)t>0&&t<e.length-1&&(e[t]=\"*\");return e.join(\"\")},l=t=>{if(t.length<4)return t;const e=t.split(\"\");for(let t=0;t<e.length-4;t++)e[t]=\"*\";return e.join(\"\")},u=e=>t(void 0,void 0,void 0,(function*(){try{yield i(e,(t=>o(t).matches(\"autoSignIn\")))}catch(t){}})),m=({payload:{data:e,event:n}},i,a)=>t(void 0,void 0,void 0,(function*(){const{send:t}=i,r=i.getSnapshot(),{onSignIn:c,onSignOut:l}=null!=a?a:{};switch(n){case\"tokenRefresh\":r.matches(\"authenticated.idle\")&&t(\"TOKEN_REFRESH\");break;case\"autoSignIn\":if(!r.matches(\"authenticated\")){yield u(i);const n=o(i.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN\",data:e})}break;case\"autoSignIn_failure\":{yield u(i);const n=o(i.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN_FAILURE\",data:e});break}case\"signIn\":s(c)&&c();break;case\"signOut\":case\"tokenRefresh_failure\":s(l)&&l(),r.matches(\"authenticated.idle\")&&t(\"SIGN_OUT\")}})),d=(t,n=m)=>e.listen(\"auth\",((t,e)=>n=>{e(n,t)})(t,n),\"authenticator-hub-handler\"),h=t=>a.some((e=>t.includes(e))),p=(t,e,n)=>encodeURI(`otpauth://totp/${t}:${e}?secret=${n}&issuer=${t}`);function f(t,...e){return Object.entries(t).reduce(((t,[n,i])=>Object.assign(Object.assign({},t),{[n]:e.includes(n)?i:null==i?void 0:i.trim()})),{})}export{c as censorAllButFirstAndLast,l as censorPhoneNumber,r as configureComponent,m as defaultAuthHubHandler,p as getTotpCodeURL,h as hasSpecialChars,d as listenToAuthHub,f as trimValues};\n"],"mappings":"AAAA,SAAOA,SAAS,IAAIC,CAApB,QAA0B,OAA1B;AAAkC,SAAOC,GAAG,IAAIC,CAAd,QAAoB,aAApB;AAAkC,SAAOC,wBAAwB,IAAIC,CAAnC,QAAyC,mBAAzC;AAA6D,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,uBAAxB;AAAgD,SAAOC,0BAA0B,IAAIC,CAArC,QAA2C,iBAA3C;AAA6D,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,aAA9B;AAA4C,SAAOC,UAAU,IAAIC,CAArB,QAA2B,uBAA3B;;AAAmD,MAAMC,CAAC,GAAC,CAAC;EAACC,WAAW,EAACd,CAAb;EAAee,OAAO,EAACb;AAAvB,CAAD,KAA6B;EAACE,CAAC,CAAE,GAAEJ,CAAE,IAAGE,CAAE,EAAX,CAAD;AAAe,CAArD;AAAA,MAAsDc,CAAC,GAAChB,CAAC,IAAE;EAAC,MAAME,CAAC,GAACF,CAAC,CAACiB,IAAF,GAASC,KAAT,CAAe,EAAf,CAAR;;EAA2B,KAAI,IAAIlB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACE,CAAC,CAACiB,MAAhB,EAAuBnB,CAAC,EAAxB,EAA2BA,CAAC,GAAC,CAAF,IAAKA,CAAC,GAACE,CAAC,CAACiB,MAAF,GAAS,CAAhB,KAAoBjB,CAAC,CAACF,CAAD,CAAD,GAAK,GAAzB;;EAA8B,OAAOE,CAAC,CAACkB,IAAF,CAAO,EAAP,CAAP;AAAkB,CAAlK;AAAA,MAAmKC,CAAC,GAACrB,CAAC,IAAE;EAAC,IAAGA,CAAC,CAACmB,MAAF,GAAS,CAAZ,EAAc,OAAOnB,CAAP;EAAS,MAAME,CAAC,GAACF,CAAC,CAACkB,KAAF,CAAQ,EAAR,CAAR;;EAAoB,KAAI,IAAIlB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACE,CAAC,CAACiB,MAAF,GAAS,CAAvB,EAAyBnB,CAAC,EAA1B,EAA6BE,CAAC,CAACF,CAAD,CAAD,GAAK,GAAL;;EAAS,OAAOE,CAAC,CAACkB,IAAF,CAAO,EAAP,CAAP;AAAkB,CAA5Q;AAAA,MAA6QE,CAAC,GAACpB,CAAC,IAAEF,CAAC,CAAC,KAAK,CAAN,EAAQ,KAAK,CAAb,EAAe,KAAK,CAApB,EAAuB,aAAW;EAAC,IAAG;IAAC,MAAMM,CAAC,CAACJ,CAAD,EAAIF,CAAC,IAAEU,CAAC,CAACV,CAAD,CAAD,CAAKuB,OAAL,CAAa,YAAb,CAAP,CAAP;EAA2C,CAA/C,CAA+C,OAAMvB,CAAN,EAAQ,CAAE;AAAC,CAA7F,CAAnR;AAAA,MAAmXwB,CAAC,GAAC,CAAC;EAACC,OAAO,EAAC;IAACC,IAAI,EAACxB,CAAN;IAAQyB,KAAK,EAACvB;EAAd;AAAT,CAAD,EAA4BE,CAA5B,EAA8BE,CAA9B,KAAkCR,CAAC,CAAC,KAAK,CAAN,EAAQ,KAAK,CAAb,EAAe,KAAK,CAApB,EAAuB,aAAW;EAAC,MAAK;IAAC4B,IAAI,EAAC5B;EAAN,IAASM,CAAd;EAAA,MAAgBO,CAAC,GAACP,CAAC,CAACuB,WAAF,EAAlB;EAAA,MAAkC;IAACC,QAAQ,EAACd,CAAV;IAAYe,SAAS,EAACV;EAAtB,IAAyB,QAAMb,CAAN,GAAQA,CAAR,GAAU,EAArE;;EAAwE,QAAOJ,CAAP;IAAU,KAAI,cAAJ;MAAmBS,CAAC,CAACU,OAAF,CAAU,oBAAV,KAAiCvB,CAAC,CAAC,eAAD,CAAlC;MAAoD;;IAAM,KAAI,YAAJ;MAAiB,IAAG,CAACa,CAAC,CAACU,OAAF,CAAU,eAAV,CAAJ,EAA+B;QAAC,MAAMD,CAAC,CAAChB,CAAD,CAAP;QAAW,MAAMF,CAAC,GAACM,CAAC,CAACJ,CAAC,CAACuB,WAAF,EAAD,CAAT;QAA2B,CAAC,QAAMzB,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACmB,OAAF,CAAU,YAAV,CAAhB,KAA0CvB,CAAC,CAAC;UAACgC,IAAI,EAAC,cAAN;UAAqBN,IAAI,EAACxB;QAA1B,CAAD,CAA3C;MAA0E;;MAAA;;IAAM,KAAI,oBAAJ;MAAyB;QAAC,MAAMoB,CAAC,CAAChB,CAAD,CAAP;QAAW,MAAMF,CAAC,GAACM,CAAC,CAACJ,CAAC,CAACuB,WAAF,EAAD,CAAT;QAA2B,CAAC,QAAMzB,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACmB,OAAF,CAAU,YAAV,CAAhB,KAA0CvB,CAAC,CAAC;UAACgC,IAAI,EAAC,sBAAN;UAA6BN,IAAI,EAACxB;QAAlC,CAAD,CAA3C;QAAkF;MAAM;;IAAA,KAAI,QAAJ;MAAaU,CAAC,CAACI,CAAD,CAAD,IAAMA,CAAC,EAAP;MAAU;;IAAM,KAAI,SAAJ;IAAc,KAAI,sBAAJ;MAA2BJ,CAAC,CAACS,CAAD,CAAD,IAAMA,CAAC,EAAP,EAAUR,CAAC,CAACU,OAAF,CAAU,oBAAV,KAAiCvB,CAAC,CAAC,UAAD,CAA5C;EAA5d;AAAshB,CAAjoB,CAAxZ;AAAA,MAA4hCiC,CAAC,GAAC,CAACjC,CAAD,EAAGI,CAAC,GAACoB,CAAL,KAAStB,CAAC,CAACgC,MAAF,CAAS,MAAT,EAAgB,CAAC,CAAClC,CAAD,EAAGE,CAAH,KAAOE,CAAC,IAAE;EAACF,CAAC,CAACE,CAAD,EAAGJ,CAAH,CAAD;AAAO,CAAnB,EAAqBA,CAArB,EAAuBI,CAAvB,CAAhB,EAA0C,2BAA1C,CAAviC;AAAA,MAA8mC+B,CAAC,GAACnC,CAAC,IAAEQ,CAAC,CAAC4B,IAAF,CAAQlC,CAAC,IAAEF,CAAC,CAACqC,QAAF,CAAWnC,CAAX,CAAX,CAAnnC;AAAA,MAA8oCoC,CAAC,GAAC,CAACtC,CAAD,EAAGE,CAAH,EAAKE,CAAL,KAASmC,SAAS,CAAE,kBAAiBvC,CAAE,IAAGE,CAAE,WAAUE,CAAE,WAAUJ,CAAE,EAAlD,CAAlqC;;AAAutC,SAASwC,CAAT,CAAWxC,CAAX,EAAa,GAAGE,CAAhB,EAAkB;EAAC,OAAOuC,MAAM,CAACC,OAAP,CAAe1C,CAAf,EAAkB2C,MAAlB,CAA0B,CAAC3C,CAAD,EAAG,CAACI,CAAD,EAAGE,CAAH,CAAH,KAAWmC,MAAM,CAACG,MAAP,CAAcH,MAAM,CAACG,MAAP,CAAc,EAAd,EAAiB5C,CAAjB,CAAd,EAAkC;IAAC,CAACI,CAAD,GAAIF,CAAC,CAACmC,QAAF,CAAWjC,CAAX,IAAcE,CAAd,GAAgB,QAAMA,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACW,IAAF;EAApC,CAAlC,CAArC,EAAuH,EAAvH,CAAP;AAAkI;;AAAA,SAAOD,CAAC,IAAI6B,wBAAZ,EAAqCxB,CAAC,IAAIyB,iBAA1C,EAA4DjC,CAAC,IAAIkC,kBAAjE,EAAoFvB,CAAC,IAAIwB,qBAAzF,EAA+GV,CAAC,IAAIW,cAApH,EAAmId,CAAC,IAAIe,eAAxI,EAAwJjB,CAAC,IAAIkB,eAA7J,EAA6KX,CAAC,IAAIY,UAAlL"},"metadata":{},"sourceType":"module"}