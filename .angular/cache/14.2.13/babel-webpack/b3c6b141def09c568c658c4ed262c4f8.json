{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { browserOrNode, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport noop from 'lodash/noop'; // Per https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API\n\nvar hidden;\nvar visibilityChange;\nvar isBrowser = browserOrNode().isBrowser;\n\nif (isBrowser && document) {\n  if (typeof document.hidden !== 'undefined') {\n    hidden = 'hidden';\n    visibilityChange = 'visibilitychange';\n  } else if (typeof document['msHidden'] !== 'undefined') {\n    hidden = 'msHidden';\n    visibilityChange = 'msvisibilitychange';\n  } else if (typeof document['webkitHidden'] !== 'undefined') {\n    hidden = 'webkitHidden';\n    visibilityChange = 'webkitvisibilitychange';\n  }\n}\n\nvar logger = new Logger('InAppMessagingSessionTracker');\n\nvar SessionTracker =\n/** @class */\nfunction () {\n  function SessionTracker(sessionStateChangeHandler) {\n    var _this = this;\n\n    if (sessionStateChangeHandler === void 0) {\n      sessionStateChangeHandler = noop;\n    }\n\n    this.start = function () {\n      if (isBrowser) {\n        document === null || document === void 0 ? void 0 : document.addEventListener(visibilityChange, _this.visibilityChangeHandler);\n      }\n\n      return _this.getSessionState();\n    };\n\n    this.end = function () {\n      if (isBrowser) {\n        document === null || document === void 0 ? void 0 : document.removeEventListener(visibilityChange, _this.visibilityChangeHandler);\n      }\n\n      return _this.getSessionState();\n    };\n\n    this.getSessionState = function () {\n      if (isBrowser && document && !document[hidden]) {\n        return 'started';\n      } // If, for any reason, document is undefined the session will never start\n\n\n      return 'ended';\n    };\n\n    this.visibilityChangeHandler = function () {\n      if (!isBrowser || !document) {\n        return;\n      }\n\n      if (document[hidden]) {\n        logger.debug('App is now hidden');\n\n        _this.sessionStateChangeHandler('ended');\n      } else {\n        logger.debug('App is now visible');\n\n        _this.sessionStateChangeHandler('started');\n      }\n    };\n\n    this.sessionStateChangeHandler = sessionStateChangeHandler;\n  }\n\n  return SessionTracker;\n}();\n\nexport default SessionTracker;","map":{"version":3,"names":["browserOrNode","ConsoleLogger","Logger","noop","hidden","visibilityChange","isBrowser","document","logger","SessionTracker","sessionStateChangeHandler","_this","start","addEventListener","visibilityChangeHandler","getSessionState","end","removeEventListener","debug"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-amplify/notifications/lib-esm/InAppMessaging/SessionTracker/SessionTracker.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { browserOrNode, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport noop from 'lodash/noop';\n// Per https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API\nvar hidden;\nvar visibilityChange;\nvar isBrowser = browserOrNode().isBrowser;\nif (isBrowser && document) {\n    if (typeof document.hidden !== 'undefined') {\n        hidden = 'hidden';\n        visibilityChange = 'visibilitychange';\n    }\n    else if (typeof document['msHidden'] !== 'undefined') {\n        hidden = 'msHidden';\n        visibilityChange = 'msvisibilitychange';\n    }\n    else if (typeof document['webkitHidden'] !== 'undefined') {\n        hidden = 'webkitHidden';\n        visibilityChange = 'webkitvisibilitychange';\n    }\n}\nvar logger = new Logger('InAppMessagingSessionTracker');\nvar SessionTracker = /** @class */ (function () {\n    function SessionTracker(sessionStateChangeHandler) {\n        var _this = this;\n        if (sessionStateChangeHandler === void 0) { sessionStateChangeHandler = noop; }\n        this.start = function () {\n            if (isBrowser) {\n                document === null || document === void 0 ? void 0 : document.addEventListener(visibilityChange, _this.visibilityChangeHandler);\n            }\n            return _this.getSessionState();\n        };\n        this.end = function () {\n            if (isBrowser) {\n                document === null || document === void 0 ? void 0 : document.removeEventListener(visibilityChange, _this.visibilityChangeHandler);\n            }\n            return _this.getSessionState();\n        };\n        this.getSessionState = function () {\n            if (isBrowser && document && !document[hidden]) {\n                return 'started';\n            }\n            // If, for any reason, document is undefined the session will never start\n            return 'ended';\n        };\n        this.visibilityChangeHandler = function () {\n            if (!isBrowser || !document) {\n                return;\n            }\n            if (document[hidden]) {\n                logger.debug('App is now hidden');\n                _this.sessionStateChangeHandler('ended');\n            }\n            else {\n                logger.debug('App is now visible');\n                _this.sessionStateChangeHandler('started');\n            }\n        };\n        this.sessionStateChangeHandler = sessionStateChangeHandler;\n    }\n    return SessionTracker;\n}());\nexport default SessionTracker;\n"],"mappings":"AAAA;AACA;AACA,SAASA,aAAT,EAAwBC,aAAa,IAAIC,MAAzC,QAAuD,mBAAvD;AACA,OAAOC,IAAP,MAAiB,aAAjB,C,CACA;;AACA,IAAIC,MAAJ;AACA,IAAIC,gBAAJ;AACA,IAAIC,SAAS,GAAGN,aAAa,GAAGM,SAAhC;;AACA,IAAIA,SAAS,IAAIC,QAAjB,EAA2B;EACvB,IAAI,OAAOA,QAAQ,CAACH,MAAhB,KAA2B,WAA/B,EAA4C;IACxCA,MAAM,GAAG,QAAT;IACAC,gBAAgB,GAAG,kBAAnB;EACH,CAHD,MAIK,IAAI,OAAOE,QAAQ,CAAC,UAAD,CAAf,KAAgC,WAApC,EAAiD;IAClDH,MAAM,GAAG,UAAT;IACAC,gBAAgB,GAAG,oBAAnB;EACH,CAHI,MAIA,IAAI,OAAOE,QAAQ,CAAC,cAAD,CAAf,KAAoC,WAAxC,EAAqD;IACtDH,MAAM,GAAG,cAAT;IACAC,gBAAgB,GAAG,wBAAnB;EACH;AACJ;;AACD,IAAIG,MAAM,GAAG,IAAIN,MAAJ,CAAW,8BAAX,CAAb;;AACA,IAAIO,cAAc;AAAG;AAAe,YAAY;EAC5C,SAASA,cAAT,CAAwBC,yBAAxB,EAAmD;IAC/C,IAAIC,KAAK,GAAG,IAAZ;;IACA,IAAID,yBAAyB,KAAK,KAAK,CAAvC,EAA0C;MAAEA,yBAAyB,GAAGP,IAA5B;IAAmC;;IAC/E,KAAKS,KAAL,GAAa,YAAY;MACrB,IAAIN,SAAJ,EAAe;QACXC,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACM,gBAAT,CAA0BR,gBAA1B,EAA4CM,KAAK,CAACG,uBAAlD,CAApD;MACH;;MACD,OAAOH,KAAK,CAACI,eAAN,EAAP;IACH,CALD;;IAMA,KAAKC,GAAL,GAAW,YAAY;MACnB,IAAIV,SAAJ,EAAe;QACXC,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACU,mBAAT,CAA6BZ,gBAA7B,EAA+CM,KAAK,CAACG,uBAArD,CAApD;MACH;;MACD,OAAOH,KAAK,CAACI,eAAN,EAAP;IACH,CALD;;IAMA,KAAKA,eAAL,GAAuB,YAAY;MAC/B,IAAIT,SAAS,IAAIC,QAAb,IAAyB,CAACA,QAAQ,CAACH,MAAD,CAAtC,EAAgD;QAC5C,OAAO,SAAP;MACH,CAH8B,CAI/B;;;MACA,OAAO,OAAP;IACH,CAND;;IAOA,KAAKU,uBAAL,GAA+B,YAAY;MACvC,IAAI,CAACR,SAAD,IAAc,CAACC,QAAnB,EAA6B;QACzB;MACH;;MACD,IAAIA,QAAQ,CAACH,MAAD,CAAZ,EAAsB;QAClBI,MAAM,CAACU,KAAP,CAAa,mBAAb;;QACAP,KAAK,CAACD,yBAAN,CAAgC,OAAhC;MACH,CAHD,MAIK;QACDF,MAAM,CAACU,KAAP,CAAa,oBAAb;;QACAP,KAAK,CAACD,yBAAN,CAAgC,SAAhC;MACH;IACJ,CAZD;;IAaA,KAAKA,yBAAL,GAAiCA,yBAAjC;EACH;;EACD,OAAOD,cAAP;AACH,CAvCmC,EAApC;;AAwCA,eAAeA,cAAf"},"metadata":{},"sourceType":"module"}