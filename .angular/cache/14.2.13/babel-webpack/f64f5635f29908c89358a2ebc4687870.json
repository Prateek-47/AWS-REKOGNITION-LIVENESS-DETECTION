{"ast":null,"code":"import { HttpRequest } from \"@aws-sdk/protocol-http\";\nexport const websocketEndpointMiddleware = (config, options) => next => args => {\n  const {\n    request\n  } = args;\n\n  if (HttpRequest.isInstance(request) && config.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes(\"websocket\")) {\n    request.protocol = \"wss:\";\n    request.method = \"GET\";\n    request.path = `${request.path}-websocket`;\n    const {\n      headers\n    } = request;\n    delete headers[\"Content-Type\"];\n    delete headers[\"x-amz-content-sha256\"];\n\n    for (const name of Object.keys(headers)) {\n      if (name.indexOf(options.headerPrefix) === 0) {\n        const chunkedName = name.replace(options.headerPrefix, \"\");\n        request.query[chunkedName] = headers[name];\n      }\n    }\n\n    if (headers[\"x-amz-user-agent\"]) {\n      request.query[\"user-agent\"] = headers[\"x-amz-user-agent\"];\n    }\n\n    request.headers = {\n      host: headers.host ?? request.hostname\n    };\n  }\n\n  return next(args);\n};\nexport const websocketEndpointMiddlewareOptions = {\n  name: \"websocketEndpointMiddleware\",\n  tags: [\"WEBSOCKET\", \"EVENT_STREAM\"],\n  relation: \"after\",\n  toMiddleware: \"eventStreamHeaderMiddleware\",\n  override: true\n};","map":{"version":3,"names":["HttpRequest","websocketEndpointMiddleware","config","options","next","args","request","isInstance","requestHandler","metadata","handlerProtocol","toLowerCase","includes","protocol","method","path","headers","name","Object","keys","indexOf","headerPrefix","chunkedName","replace","query","host","hostname","websocketEndpointMiddlewareOptions","tags","relation","toMiddleware","override"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-sdk/middleware-websocket/dist-es/middleware-websocket-endpoint.js"],"sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nexport const websocketEndpointMiddleware = (config, options) => (next) => (args) => {\n    const { request } = args;\n    if (HttpRequest.isInstance(request) &&\n        config.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes(\"websocket\")) {\n        request.protocol = \"wss:\";\n        request.method = \"GET\";\n        request.path = `${request.path}-websocket`;\n        const { headers } = request;\n        delete headers[\"Content-Type\"];\n        delete headers[\"x-amz-content-sha256\"];\n        for (const name of Object.keys(headers)) {\n            if (name.indexOf(options.headerPrefix) === 0) {\n                const chunkedName = name.replace(options.headerPrefix, \"\");\n                request.query[chunkedName] = headers[name];\n            }\n        }\n        if (headers[\"x-amz-user-agent\"]) {\n            request.query[\"user-agent\"] = headers[\"x-amz-user-agent\"];\n        }\n        request.headers = { host: headers.host ?? request.hostname };\n    }\n    return next(args);\n};\nexport const websocketEndpointMiddlewareOptions = {\n    name: \"websocketEndpointMiddleware\",\n    tags: [\"WEBSOCKET\", \"EVENT_STREAM\"],\n    relation: \"after\",\n    toMiddleware: \"eventStreamHeaderMiddleware\",\n    override: true,\n};\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,wBAA5B;AACA,OAAO,MAAMC,2BAA2B,GAAG,CAACC,MAAD,EAASC,OAAT,KAAsBC,IAAD,IAAWC,IAAD,IAAU;EAChF,MAAM;IAAEC;EAAF,IAAcD,IAApB;;EACA,IAAIL,WAAW,CAACO,UAAZ,CAAuBD,OAAvB,KACAJ,MAAM,CAACM,cAAP,CAAsBC,QAAtB,EAAgCC,eAAhC,EAAiDC,WAAjD,GAA+DC,QAA/D,CAAwE,WAAxE,CADJ,EAC0F;IACtFN,OAAO,CAACO,QAAR,GAAmB,MAAnB;IACAP,OAAO,CAACQ,MAAR,GAAiB,KAAjB;IACAR,OAAO,CAACS,IAAR,GAAgB,GAAET,OAAO,CAACS,IAAK,YAA/B;IACA,MAAM;MAAEC;IAAF,IAAcV,OAApB;IACA,OAAOU,OAAO,CAAC,cAAD,CAAd;IACA,OAAOA,OAAO,CAAC,sBAAD,CAAd;;IACA,KAAK,MAAMC,IAAX,IAAmBC,MAAM,CAACC,IAAP,CAAYH,OAAZ,CAAnB,EAAyC;MACrC,IAAIC,IAAI,CAACG,OAAL,CAAajB,OAAO,CAACkB,YAArB,MAAuC,CAA3C,EAA8C;QAC1C,MAAMC,WAAW,GAAGL,IAAI,CAACM,OAAL,CAAapB,OAAO,CAACkB,YAArB,EAAmC,EAAnC,CAApB;QACAf,OAAO,CAACkB,KAAR,CAAcF,WAAd,IAA6BN,OAAO,CAACC,IAAD,CAApC;MACH;IACJ;;IACD,IAAID,OAAO,CAAC,kBAAD,CAAX,EAAiC;MAC7BV,OAAO,CAACkB,KAAR,CAAc,YAAd,IAA8BR,OAAO,CAAC,kBAAD,CAArC;IACH;;IACDV,OAAO,CAACU,OAAR,GAAkB;MAAES,IAAI,EAAET,OAAO,CAACS,IAAR,IAAgBnB,OAAO,CAACoB;IAAhC,CAAlB;EACH;;EACD,OAAOtB,IAAI,CAACC,IAAD,CAAX;AACH,CAtBM;AAuBP,OAAO,MAAMsB,kCAAkC,GAAG;EAC9CV,IAAI,EAAE,6BADwC;EAE9CW,IAAI,EAAE,CAAC,WAAD,EAAc,cAAd,CAFwC;EAG9CC,QAAQ,EAAE,OAHoC;EAI9CC,YAAY,EAAE,6BAJgC;EAK9CC,QAAQ,EAAE;AALoC,CAA3C"},"metadata":{},"sourceType":"module"}