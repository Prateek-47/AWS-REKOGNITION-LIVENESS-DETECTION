{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { __assign, __awaiter, __generator } from \"tslib\";\nimport { Category, ClientDevice, Credentials, getAmplifyUserAgent, InAppMessagingAction, PushNotificationAction, StorageHelper, transferKeyToUpperCase } from '@aws-amplify/core';\nimport { Cache } from '@aws-amplify/cache';\nimport { putEvents, updateEndpoint } from '@aws-amplify/core/internals/aws-clients/pinpoint';\nimport { v4 as uuid } from 'uuid';\n\nvar AWSPinpointProviderCommon =\n/** @class */\nfunction () {\n  function AWSPinpointProviderCommon(logger) {\n    var _this = this;\n\n    var _a;\n\n    this.config = {};\n    this.endpointInitialized = false;\n    this.initialized = false;\n\n    this.identifyUser = function (userId, userInfo) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var err_1;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!!this.initialized) return [3\n              /*break*/\n              , 2];\n              return [4\n              /*yield*/\n              , this.init()];\n\n            case 1:\n              _a.sent();\n\n              _a.label = 2;\n\n            case 2:\n              _a.trys.push([2, 4,, 5]);\n\n              return [4\n              /*yield*/\n              , this.updateEndpoint(userId, userInfo)];\n\n            case 3:\n              _a.sent();\n\n              return [3\n              /*break*/\n              , 5];\n\n            case 4:\n              err_1 = _a.sent();\n              this.logger.error('Error identifying user', err_1);\n              throw err_1;\n\n            case 5:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    this.init = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var _a, endpointId, storage, providerName, _b, err_2;\n\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              _a = this.config, endpointId = _a.endpointId, storage = _a.storage;\n              providerName = this.getProviderName();\n              _c.label = 1;\n\n            case 1:\n              _c.trys.push([1, 6,, 7]);\n\n              if (!(typeof storage.sync === 'function')) return [3\n              /*break*/\n              , 3];\n              return [4\n              /*yield*/\n              , storage.sync()];\n\n            case 2:\n              _c.sent();\n\n              _c.label = 3;\n\n            case 3:\n              if (!!endpointId) return [3\n              /*break*/\n              , 5];\n              _b = this.config;\n              return [4\n              /*yield*/\n              , this.getEndpointId()];\n\n            case 4:\n              _b.endpointId = _c.sent();\n              _c.label = 5;\n\n            case 5:\n              this.initialized = true;\n              return [3\n              /*break*/\n              , 7];\n\n            case 6:\n              err_2 = _c.sent();\n              this.logger.error(\"Failed to initialize \" + providerName, err_2);\n              return [3\n              /*break*/\n              , 7];\n\n            case 7:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    this.getUserAgentValue = function () {\n      var customUserAgentDetails;\n\n      if (_this.getSubCategory() === 'PushNotification') {\n        customUserAgentDetails = {\n          category: Category.PushNotification,\n          action: PushNotificationAction.None\n        };\n      } else {\n        customUserAgentDetails = {\n          category: Category.InAppMessaging,\n          action: InAppMessagingAction.None\n        };\n      }\n\n      return getAmplifyUserAgent(customUserAgentDetails);\n    };\n\n    this.recordAnalyticsEvent = function (event) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var _a, _b, appId, credentials, endpointId, region, input, err_3;\n\n        var _c, _d;\n\n        return __generator(this, function (_e) {\n          switch (_e.label) {\n            case 0:\n              // Update credentials\n              _a = this.config;\n              return [4\n              /*yield*/\n              , this.getCredentials()];\n\n            case 1:\n              // Update credentials\n              _a.credentials = _e.sent(); // Assert required configuration properties to make `putEvents` request are present\n\n              this.assertNotEmptyConfiguration();\n              _b = this.config, appId = _b.appId, credentials = _b.credentials, endpointId = _b.endpointId, region = _b.region;\n              _e.label = 2;\n\n            case 2:\n              _e.trys.push([2, 4,, 5]);\n\n              input = {\n                ApplicationId: appId,\n                EventsRequest: {\n                  BatchItem: (_c = {}, _c[endpointId] = {\n                    Endpoint: {},\n                    Events: (_d = {}, _d[uuid()] = event, _d)\n                  }, _c)\n                }\n              };\n              this.logger.debug('recording analytics event');\n              return [4\n              /*yield*/\n              , putEvents({\n                credentials: credentials,\n                region: region,\n                userAgentValue: this.getUserAgentValue()\n              }, input)];\n\n            case 3:\n              _e.sent();\n\n              return [3\n              /*break*/\n              , 5];\n\n            case 4:\n              err_3 = _e.sent();\n              this.logger.error('Error recording analytics event', err_3);\n              throw err_3;\n\n            case 5:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    this.updateEndpoint = function (userId, userInfo) {\n      if (userId === void 0) {\n        userId = null;\n      }\n\n      if (userInfo === void 0) {\n        userInfo = null;\n      }\n\n      return __awaiter(_this, void 0, void 0, function () {\n        var credentials, credentialsUpdated, _a, appId, endpointId, _b, endpointInfo, region, _c, address, attributes, demographic, location_1, metrics, optOut, _d, appVersion, make, model, platform, version, input, err_4;\n\n        var _this = this;\n\n        var _e;\n\n        return __generator(this, function (_f) {\n          switch (_f.label) {\n            case 0:\n              return [4\n              /*yield*/\n              , this.getCredentials()];\n\n            case 1:\n              credentials = _f.sent();\n              credentialsUpdated = !this.config.credentials || Object.keys(credentials).some(function (key) {\n                return credentials[key] !== _this.config.credentials[key];\n              }); // If endpoint is already initialized, and nothing else is changing, just early return\n\n              if (this.endpointInitialized && !credentialsUpdated && !userId && !userInfo) {\n                return [2\n                /*return*/\n                ];\n              } // Update credentials\n\n\n              this.config.credentials = credentials; // Assert required configuration properties to make `updateEndpoint` request are present\n\n              this.assertNotEmptyConfiguration();\n              _a = this.config, appId = _a.appId, endpointId = _a.endpointId, _b = _a.endpointInfo, endpointInfo = _b === void 0 ? {} : _b, region = _a.region;\n              _f.label = 2;\n\n            case 2:\n              _f.trys.push([2, 4,, 5]);\n\n              _c = userInfo !== null && userInfo !== void 0 ? userInfo : {}, address = _c.address, attributes = _c.attributes, demographic = _c.demographic, location_1 = _c.location, metrics = _c.metrics, optOut = _c.optOut;\n              _d = this.clientInfo, appVersion = _d.appVersion, make = _d.make, model = _d.model, platform = _d.platform, version = _d.version;\n              input = {\n                ApplicationId: appId,\n                EndpointId: endpointId,\n                EndpointRequest: {\n                  RequestId: uuid(),\n                  EffectiveDate: new Date().toISOString(),\n                  ChannelType: endpointInfo.channelType,\n                  Address: address !== null && address !== void 0 ? address : endpointInfo.address,\n                  Attributes: __assign(__assign({}, endpointInfo.attributes), attributes),\n                  Demographic: __assign({\n                    AppVersion: appVersion,\n                    Make: make,\n                    Model: model,\n                    ModelVersion: version,\n                    Platform: platform\n                  }, transferKeyToUpperCase(__assign(__assign({}, endpointInfo.demographic), demographic))),\n                  Location: transferKeyToUpperCase(__assign(__assign({}, endpointInfo.location), location_1)),\n                  Metrics: __assign(__assign({}, endpointInfo.metrics), metrics),\n                  OptOut: optOut !== null && optOut !== void 0 ? optOut : endpointInfo.optOut,\n                  User: {\n                    UserId: (_e = userId !== null && userId !== void 0 ? userId : endpointInfo.userId) !== null && _e !== void 0 ? _e : credentials.identityId,\n                    UserAttributes: attributes !== null && attributes !== void 0 ? attributes : endpointInfo.userAttributes\n                  }\n                }\n              };\n              this.logger.debug('updating endpoint');\n              return [4\n              /*yield*/\n              , updateEndpoint({\n                credentials: credentials,\n                region: region,\n                userAgentValue: this.getUserAgentValue()\n              }, input)];\n\n            case 3:\n              _f.sent();\n\n              this.endpointInitialized = true;\n              return [3\n              /*break*/\n              , 5];\n\n            case 4:\n              err_4 = _f.sent();\n              throw err_4;\n\n            case 5:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    this.getEndpointId = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var appId, cacheKey, cachedEndpointId, endpointId, ttl, expiration;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              appId = this.config.appId;\n              cacheKey = this.getSubCategory() === 'PushNotification' ? this.getProviderName() + \"_\" + appId : this.getSubCategory() + \":\" + this.getProviderName() + \":\" + appId;\n              return [4\n              /*yield*/\n              , Cache.getItem(cacheKey)];\n\n            case 1:\n              cachedEndpointId = _a.sent(); // Found in cache, just return it\n\n              if (cachedEndpointId) {\n                return [2\n                /*return*/\n                , cachedEndpointId];\n              }\n\n              endpointId = uuid();\n              ttl = 1000 * 60 * 60 * 24 * 365 * 100;\n              expiration = new Date().getTime() + ttl;\n              Cache.setItem(cacheKey, endpointId, {\n                expires: expiration,\n                priority: 1\n              });\n              return [2\n              /*return*/\n              , endpointId];\n          }\n        });\n      });\n    };\n\n    this.getCredentials = function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var credentials, err_5;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              _a.trys.push([0, 2,, 3]);\n\n              return [4\n              /*yield*/\n              , Credentials.get()];\n\n            case 1:\n              credentials = _a.sent();\n\n              if (!credentials) {\n                this.logger.debug('no credentials found');\n                return [2\n                /*return*/\n                , null];\n              }\n\n              return [2\n              /*return*/\n              , Credentials.shear(credentials)];\n\n            case 2:\n              err_5 = _a.sent();\n              this.logger.error('Error getting credentials:', err_5);\n              return [2\n              /*return*/\n              , null];\n\n            case 3:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    this.assertNotEmptyConfiguration = function () {\n      var _a = _this.config,\n          appId = _a.appId,\n          credentials = _a.credentials,\n          region = _a.region;\n\n      if (!appId || !credentials || !region) {\n        throw new Error('One or more of credentials, appId or region is not configured');\n      }\n    };\n\n    this.config = {\n      storage: new StorageHelper().getStorage()\n    };\n    this.clientInfo = (_a = ClientDevice.clientInfo()) !== null && _a !== void 0 ? _a : {};\n    this.logger = logger;\n  }\n  /**\n   * get the category of the plugin\n   */\n\n\n  AWSPinpointProviderCommon.prototype.getCategory = function () {\n    return AWSPinpointProviderCommon.category;\n  };\n  /**\n   * get provider name of the plugin\n   */\n\n\n  AWSPinpointProviderCommon.prototype.getProviderName = function () {\n    return AWSPinpointProviderCommon.providerName;\n  };\n\n  AWSPinpointProviderCommon.prototype.configure = function (config) {\n    if (config === void 0) {\n      config = {};\n    }\n\n    this.config = __assign(__assign({}, this.config), config);\n    this.logger.debug(\"configure \" + this.getProviderName() + this.getSubCategory() + \"Provider\", this.config);\n    return this.config;\n  };\n\n  AWSPinpointProviderCommon.category = 'Notifications';\n  AWSPinpointProviderCommon.providerName = 'AWSPinpoint';\n  return AWSPinpointProviderCommon;\n}();\n\nexport default AWSPinpointProviderCommon;","map":{"version":3,"names":["__assign","__awaiter","__generator","Category","ClientDevice","Credentials","getAmplifyUserAgent","InAppMessagingAction","PushNotificationAction","StorageHelper","transferKeyToUpperCase","Cache","putEvents","updateEndpoint","v4","uuid","AWSPinpointProviderCommon","logger","_this","_a","config","endpointInitialized","initialized","identifyUser","userId","userInfo","err_1","label","init","sent","trys","push","error","endpointId","storage","providerName","_b","err_2","_c","getProviderName","sync","getEndpointId","getUserAgentValue","customUserAgentDetails","getSubCategory","category","PushNotification","action","None","InAppMessaging","recordAnalyticsEvent","event","appId","credentials","region","input","err_3","_d","_e","getCredentials","assertNotEmptyConfiguration","ApplicationId","EventsRequest","BatchItem","Endpoint","Events","debug","userAgentValue","credentialsUpdated","endpointInfo","address","attributes","demographic","location_1","metrics","optOut","appVersion","make","model","platform","version","err_4","_f","Object","keys","some","key","location","clientInfo","EndpointId","EndpointRequest","RequestId","EffectiveDate","Date","toISOString","ChannelType","channelType","Address","Attributes","Demographic","AppVersion","Make","Model","ModelVersion","Platform","Location","Metrics","OptOut","User","UserId","identityId","UserAttributes","userAttributes","cacheKey","cachedEndpointId","ttl","expiration","getItem","getTime","setItem","expires","priority","err_5","get","shear","Error","getStorage","prototype","getCategory","configure"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-amplify/notifications/lib-esm/common/AWSPinpointProviderCommon/index.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { __assign, __awaiter, __generator } from \"tslib\";\nimport { Category, ClientDevice, Credentials, getAmplifyUserAgent, InAppMessagingAction, PushNotificationAction, StorageHelper, transferKeyToUpperCase, } from '@aws-amplify/core';\nimport { Cache } from '@aws-amplify/cache';\nimport { putEvents, updateEndpoint, } from '@aws-amplify/core/internals/aws-clients/pinpoint';\nimport { v4 as uuid } from 'uuid';\nvar AWSPinpointProviderCommon = /** @class */ (function () {\n    function AWSPinpointProviderCommon(logger) {\n        var _this = this;\n        var _a;\n        this.config = {};\n        this.endpointInitialized = false;\n        this.initialized = false;\n        this.identifyUser = function (userId, userInfo) { return __awaiter(_this, void 0, void 0, function () {\n            var err_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.initialized) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.init()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.updateEndpoint(userId, userInfo)];\n                    case 3:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        err_1 = _a.sent();\n                        this.logger.error('Error identifying user', err_1);\n                        throw err_1;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        }); };\n        this.init = function () { return __awaiter(_this, void 0, void 0, function () {\n            var _a, endpointId, storage, providerName, _b, err_2;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = this.config, endpointId = _a.endpointId, storage = _a.storage;\n                        providerName = this.getProviderName();\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 6, , 7]);\n                        if (!(typeof storage.sync === 'function')) return [3 /*break*/, 3];\n                        return [4 /*yield*/, storage.sync()];\n                    case 2:\n                        _c.sent();\n                        _c.label = 3;\n                    case 3:\n                        if (!!endpointId) return [3 /*break*/, 5];\n                        _b = this.config;\n                        return [4 /*yield*/, this.getEndpointId()];\n                    case 4:\n                        _b.endpointId = _c.sent();\n                        _c.label = 5;\n                    case 5:\n                        this.initialized = true;\n                        return [3 /*break*/, 7];\n                    case 6:\n                        err_2 = _c.sent();\n                        this.logger.error(\"Failed to initialize \" + providerName, err_2);\n                        return [3 /*break*/, 7];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        }); };\n        this.getUserAgentValue = function () {\n            var customUserAgentDetails;\n            if (_this.getSubCategory() === 'PushNotification') {\n                customUserAgentDetails = {\n                    category: Category.PushNotification,\n                    action: PushNotificationAction.None,\n                };\n            }\n            else {\n                customUserAgentDetails = {\n                    category: Category.InAppMessaging,\n                    action: InAppMessagingAction.None,\n                };\n            }\n            return getAmplifyUserAgent(customUserAgentDetails);\n        };\n        this.recordAnalyticsEvent = function (event) { return __awaiter(_this, void 0, void 0, function () {\n            var _a, _b, appId, credentials, endpointId, region, input, err_3;\n            var _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        // Update credentials\n                        _a = this.config;\n                        return [4 /*yield*/, this.getCredentials()];\n                    case 1:\n                        // Update credentials\n                        _a.credentials = _e.sent();\n                        // Assert required configuration properties to make `putEvents` request are present\n                        this.assertNotEmptyConfiguration();\n                        _b = this.config, appId = _b.appId, credentials = _b.credentials, endpointId = _b.endpointId, region = _b.region;\n                        _e.label = 2;\n                    case 2:\n                        _e.trys.push([2, 4, , 5]);\n                        input = {\n                            ApplicationId: appId,\n                            EventsRequest: {\n                                BatchItem: (_c = {},\n                                    _c[endpointId] = {\n                                        Endpoint: {},\n                                        Events: (_d = {},\n                                            _d[uuid()] = event,\n                                            _d),\n                                    },\n                                    _c),\n                            },\n                        };\n                        this.logger.debug('recording analytics event');\n                        return [4 /*yield*/, putEvents({ credentials: credentials, region: region, userAgentValue: this.getUserAgentValue() }, input)];\n                    case 3:\n                        _e.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        err_3 = _e.sent();\n                        this.logger.error('Error recording analytics event', err_3);\n                        throw err_3;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        }); };\n        this.updateEndpoint = function (userId, userInfo) {\n            if (userId === void 0) { userId = null; }\n            if (userInfo === void 0) { userInfo = null; }\n            return __awaiter(_this, void 0, void 0, function () {\n                var credentials, credentialsUpdated, _a, appId, endpointId, _b, endpointInfo, region, _c, address, attributes, demographic, location_1, metrics, optOut, _d, appVersion, make, model, platform, version, input, err_4;\n                var _this = this;\n                var _e;\n                return __generator(this, function (_f) {\n                    switch (_f.label) {\n                        case 0: return [4 /*yield*/, this.getCredentials()];\n                        case 1:\n                            credentials = _f.sent();\n                            credentialsUpdated = !this.config.credentials ||\n                                Object.keys(credentials).some(function (key) { return credentials[key] !== _this.config.credentials[key]; });\n                            // If endpoint is already initialized, and nothing else is changing, just early return\n                            if (this.endpointInitialized &&\n                                !credentialsUpdated &&\n                                !userId &&\n                                !userInfo) {\n                                return [2 /*return*/];\n                            }\n                            // Update credentials\n                            this.config.credentials = credentials;\n                            // Assert required configuration properties to make `updateEndpoint` request are present\n                            this.assertNotEmptyConfiguration();\n                            _a = this.config, appId = _a.appId, endpointId = _a.endpointId, _b = _a.endpointInfo, endpointInfo = _b === void 0 ? {} : _b, region = _a.region;\n                            _f.label = 2;\n                        case 2:\n                            _f.trys.push([2, 4, , 5]);\n                            _c = userInfo !== null && userInfo !== void 0 ? userInfo : {}, address = _c.address, attributes = _c.attributes, demographic = _c.demographic, location_1 = _c.location, metrics = _c.metrics, optOut = _c.optOut;\n                            _d = this.clientInfo, appVersion = _d.appVersion, make = _d.make, model = _d.model, platform = _d.platform, version = _d.version;\n                            input = {\n                                ApplicationId: appId,\n                                EndpointId: endpointId,\n                                EndpointRequest: {\n                                    RequestId: uuid(),\n                                    EffectiveDate: new Date().toISOString(),\n                                    ChannelType: endpointInfo.channelType,\n                                    Address: address !== null && address !== void 0 ? address : endpointInfo.address,\n                                    Attributes: __assign(__assign({}, endpointInfo.attributes), attributes),\n                                    Demographic: __assign({ AppVersion: appVersion, Make: make, Model: model, ModelVersion: version, Platform: platform }, transferKeyToUpperCase(__assign(__assign({}, endpointInfo.demographic), demographic))),\n                                    Location: transferKeyToUpperCase(__assign(__assign({}, endpointInfo.location), location_1)),\n                                    Metrics: __assign(__assign({}, endpointInfo.metrics), metrics),\n                                    OptOut: optOut !== null && optOut !== void 0 ? optOut : endpointInfo.optOut,\n                                    User: {\n                                        UserId: (_e = userId !== null && userId !== void 0 ? userId : endpointInfo.userId) !== null && _e !== void 0 ? _e : credentials.identityId,\n                                        UserAttributes: attributes !== null && attributes !== void 0 ? attributes : endpointInfo.userAttributes,\n                                    },\n                                },\n                            };\n                            this.logger.debug('updating endpoint');\n                            return [4 /*yield*/, updateEndpoint({ credentials: credentials, region: region, userAgentValue: this.getUserAgentValue() }, input)];\n                        case 3:\n                            _f.sent();\n                            this.endpointInitialized = true;\n                            return [3 /*break*/, 5];\n                        case 4:\n                            err_4 = _f.sent();\n                            throw err_4;\n                        case 5: return [2 /*return*/];\n                    }\n                });\n            });\n        };\n        this.getEndpointId = function () { return __awaiter(_this, void 0, void 0, function () {\n            var appId, cacheKey, cachedEndpointId, endpointId, ttl, expiration;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        appId = this.config.appId;\n                        cacheKey = this.getSubCategory() === 'PushNotification'\n                            ? this.getProviderName() + \"_\" + appId\n                            : this.getSubCategory() + \":\" + this.getProviderName() + \":\" + appId;\n                        return [4 /*yield*/, Cache.getItem(cacheKey)];\n                    case 1:\n                        cachedEndpointId = _a.sent();\n                        // Found in cache, just return it\n                        if (cachedEndpointId) {\n                            return [2 /*return*/, cachedEndpointId];\n                        }\n                        endpointId = uuid();\n                        ttl = 1000 * 60 * 60 * 24 * 365 * 100;\n                        expiration = new Date().getTime() + ttl;\n                        Cache.setItem(cacheKey, endpointId, {\n                            expires: expiration,\n                            priority: 1,\n                        });\n                        return [2 /*return*/, endpointId];\n                }\n            });\n        }); };\n        this.getCredentials = function () { return __awaiter(_this, void 0, void 0, function () {\n            var credentials, err_5;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _a.sent();\n                        if (!credentials) {\n                            this.logger.debug('no credentials found');\n                            return [2 /*return*/, null];\n                        }\n                        return [2 /*return*/, Credentials.shear(credentials)];\n                    case 2:\n                        err_5 = _a.sent();\n                        this.logger.error('Error getting credentials:', err_5);\n                        return [2 /*return*/, null];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        }); };\n        this.assertNotEmptyConfiguration = function () {\n            var _a = _this.config, appId = _a.appId, credentials = _a.credentials, region = _a.region;\n            if (!appId || !credentials || !region) {\n                throw new Error('One or more of credentials, appId or region is not configured');\n            }\n        };\n        this.config = { storage: new StorageHelper().getStorage() };\n        this.clientInfo = (_a = ClientDevice.clientInfo()) !== null && _a !== void 0 ? _a : {};\n        this.logger = logger;\n    }\n    /**\n     * get the category of the plugin\n     */\n    AWSPinpointProviderCommon.prototype.getCategory = function () {\n        return AWSPinpointProviderCommon.category;\n    };\n    /**\n     * get provider name of the plugin\n     */\n    AWSPinpointProviderCommon.prototype.getProviderName = function () {\n        return AWSPinpointProviderCommon.providerName;\n    };\n    AWSPinpointProviderCommon.prototype.configure = function (config) {\n        if (config === void 0) { config = {}; }\n        this.config = __assign(__assign({}, this.config), config);\n        this.logger.debug(\"configure \" + this.getProviderName() + this.getSubCategory() + \"Provider\", this.config);\n        return this.config;\n    };\n    AWSPinpointProviderCommon.category = 'Notifications';\n    AWSPinpointProviderCommon.providerName = 'AWSPinpoint';\n    return AWSPinpointProviderCommon;\n}());\nexport default AWSPinpointProviderCommon;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}