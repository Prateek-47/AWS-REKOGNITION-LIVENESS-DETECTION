{"ast":null,"code":"import { __awaiter as t } from \"tslib\";\nimport { FaceMatchState as e, IlluminationState as o } from \"../types/liveness.mjs\";\nimport { LivenessErrorState as n } from \"../types/error.mjs\";\nimport { FACE_DISTANCE_THRESHOLD as i, REDUCED_THRESHOLD_MOBILE as r, REDUCED_THRESHOLD as a } from \"./constants.mjs\";\n\nfunction h(t, e, o) {\n  return t * (o - e) + e;\n}\n\nfunction l(t) {\n  const e = t.flippedCenterX - t.width / 2,\n        o = t.flippedCenterX + t.width / 2,\n        n = t.centerY - t.height / 2,\n        i = t.centerY + t.height / 2;\n  return {\n    ovalBoundingBox: {\n      left: e,\n      top: n,\n      right: o,\n      bottom: i\n    },\n    minOvalX: e,\n    maxOvalX: o,\n    minOvalY: n,\n    maxOvalY: i\n  };\n}\n\nfunction c(t, e) {\n  const o = Math.max(t.left, e.left),\n        n = Math.max(t.top, e.top),\n        i = Math.min(t.right, e.right),\n        r = Math.min(t.bottom, e.bottom),\n        a = Math.abs(Math.max(0, i - o) * Math.max(0, r - n));\n  if (0 === a) return 0;\n  return a / (Math.abs((t.right - t.left) * (t.bottom - t.top)) + Math.abs((e.right - e.left) * (e.bottom - e.top)) - a);\n}\n\nfunction s({\n  sessionInformation: t,\n  videoWidth: e\n}) {\n  var o, n;\n  const i = null === (n = null === (o = null == t ? void 0 : t.Challenge) || void 0 === o ? void 0 : o.FaceMovementAndLightChallenge) || void 0 === n ? void 0 : n.OvalParameters;\n  if (!(i && i.CenterX && i.CenterY && i.Width && i.Height)) throw new Error(\"Oval parameters not returned from session information.\");\n  return {\n    flippedCenterX: e - i.CenterX,\n    centerX: i.CenterX,\n    centerY: i.CenterY,\n    width: i.Width,\n    height: i.Height\n  };\n}\n\nfunction d({\n  width: t,\n  height: e,\n  widthSeed: o = 1,\n  centerXSeed: n = .5,\n  centerYSeed: i = .5\n}) {\n  const r = e;\n  let a = t;\n  const l = .8 * o,\n        c = Math.floor(7 * t / 16),\n        s = Math.floor(9 * t / 16),\n        d = Math.floor(7 * e / 16),\n        f = Math.floor(9 * e / 16),\n        g = h(n, c, s),\n        u = h(i, d, f);\n  t >= e && (a = 3 / 4 * r);\n  const v = l * a,\n        R = 1.618 * v;\n  return {\n    flippedCenterX: Math.floor(a - g),\n    centerX: Math.floor(g),\n    centerY: Math.floor(u),\n    width: Math.floor(v),\n    height: Math.floor(R)\n  };\n}\n\nfunction f({\n  canvas: t,\n  oval: e,\n  scaleFactor: o,\n  videoEl: n\n}) {\n  const {\n    flippedCenterX: i,\n    centerY: r,\n    width: a,\n    height: h\n  } = e,\n        {\n    width: l,\n    height: c\n  } = t.getBoundingClientRect(),\n        s = t.getContext(\"2d\");\n  if (!s) throw new Error(\"Cannot find Canvas.\");\n  {\n    s.clearRect(0, 0, l, c), s.fillStyle = \"rgba(255, 255, 255, 1.0)\", s.fillRect(0, 0, l, c);\n    const t = {\n      width: n.videoWidth,\n      height: n.videoHeight\n    },\n          e = {\n      x: (l - t.width * o) / 2,\n      y: (c - t.height * o) / 2\n    };\n    s.setTransform(o, 0, 0, o, e.x, e.y), s.beginPath(), s.ellipse(i, r, a / 2, h / 2, 0, 0, 2 * Math.PI), s.strokeStyle = \"#AEB3B7\", s.lineWidth = 3, s.stroke(), s.clip(), s.setTransform(1, 0, 0, 1, 0, 0), s.clearRect(0, 0, l, c);\n  }\n}\n\nfunction g(t, o, n, i) {\n  var r, a;\n  let h;\n  const s = null === (a = null === (r = null == i ? void 0 : i.Challenge) || void 0 === r ? void 0 : r.FaceMovementAndLightChallenge) || void 0 === a ? void 0 : a.ChallengeConfig;\n  if (!(s && s.OvalIouThreshold && s.OvalIouHeightThreshold && s.OvalIouWidthThreshold && s.FaceIouHeightThreshold && s.FaceIouWidthThreshold)) throw new Error(\"Challenge information not returned from session information.\");\n\n  const {\n    OvalIouThreshold: d,\n    OvalIouHeightThreshold: f,\n    OvalIouWidthThreshold: g,\n    FaceIouHeightThreshold: u,\n    FaceIouWidthThreshold: R\n  } = s,\n        E = v(t, o),\n        C = E.left,\n        p = E.right,\n        m = E.top,\n        M = E.bottom,\n        {\n    ovalBoundingBox: w,\n    minOvalX: O,\n    minOvalY: A,\n    maxOvalX: T,\n    maxOvalY: I\n  } = l(o),\n        x = c(E, w),\n        b = d,\n        S = o.width * g,\n        _ = o.height * f,\n        F = o.width * R,\n        D = o.height * u,\n        y = 100 * Math.max(Math.min(1, .75 * (x - n) / (b - n) + .25), 0);\n\n  return h = x > b && Math.abs(O - C) < S && Math.abs(T - p) < S && Math.abs(I - M) < _ ? e.MATCHED : A - m > D || M - I > D || O - C > F && p - T > F ? e.TOO_CLOSE : e.TOO_FAR, {\n    faceMatchState: h,\n    faceMatchPercentage: y\n  };\n}\n\nfunction u(t) {\n  const {\n    leftEye: e,\n    rightEye: o,\n    mouth: n\n  } = t,\n        i = [];\n  i[0] = (e[0] + o[0]) / 2, i[1] = (e[1] + o[1]) / 2;\n  return {\n    pupilDistance: Math.sqrt(Math.pow(e[0] - o[0], 2) + Math.pow(e[1] - o[1], 2)),\n    faceHeight: Math.sqrt(Math.pow(i[0] - n[0], 2) + Math.pow(i[1] - n[1], 2))\n  };\n}\n\nfunction v(t, e) {\n  const {\n    leftEye: o,\n    rightEye: n,\n    nose: i\n  } = t,\n        {\n    height: r,\n    centerY: a\n  } = e,\n        h = a - r / 2,\n        l = [];\n  l[0] = (o[0] + n[0]) / 2, l[1] = (o[1] + n[1]) / 2;\n  const {\n    pupilDistance: c,\n    faceHeight: s\n  } = u(t),\n        d = (2 * c + 1.8 * s) / 2,\n        f = 1.618 * d;\n  let g, v;\n  l[1] <= (h + r) / 2 ? (g = (l[0] + i[0]) / 2, v = (l[1] + i[1]) / 2) : (g = l[0], v = l[1]);\n  const R = g - d / 2,\n        E = v - f / 2;\n  return {\n    left: R,\n    top: E,\n    right: R + d,\n    bottom: E + f\n  };\n}\n\nfunction R(t) {\n  const e = document.createElement(\"canvas\");\n  e.width = t.videoWidth, e.height = t.videoHeight;\n  const n = e.getContext(\"2d\");\n\n  if (n) {\n    n.drawImage(t, 0, 0, e.width, e.height);\n    const i = n.getImageData(0, 0, e.width, e.height).data,\n          r = 8,\n          a = new Array(r).fill(0);\n\n    for (let t = 0; t < i.length; t++) {\n      a[Math.round(.2126 * i[t++] + .7152 * i[t++] + .0722 * i[t++]) % 32]++;\n    }\n\n    let h = -1,\n        l = 0;\n\n    for (let t = 0; t < r; t++) a[t] > l && (l = a[t], h = t);\n\n    return e.remove(), 0 === h ? o.DARK : h === r ? o.BRIGHT : o.NORMAL;\n  }\n\n  throw new Error(\"Cannot find Video Element.\");\n}\n\nfunction E(t) {\n  return t.label.toLowerCase().includes(\"virtual\");\n}\n\nconst C = {\n  [n.RUNTIME_ERROR]: \"RUNTIME_ERROR\",\n  [n.SERVER_ERROR]: \"SERVER_ERROR\",\n  [n.TIMEOUT]: \"TIMEOUT\",\n  [n.FACE_DISTANCE_ERROR]: \"FACE_DISTANCE_ERROR\",\n  [n.CAMERA_FRAMERATE_ERROR]: \"CAMERA_FRAMERATE_ERROR\",\n  [n.CAMERA_ACCESS_ERROR]: \"CAMERA_ACCESS_ERROR\",\n  [n.MOBILE_LANDSCAPE_ERROR]: \"MOBILE_LANDSCAPE_ERROR\",\n  [n.FRESHNESS_TIMEOUT]: \"FRESHNESS_TIMEOUT\"\n};\n\nfunction p({\n  ctx: t,\n  prevColor: e,\n  nextColor: o,\n  fraction: n\n}) {\n  const i = t.canvas.width,\n        r = t.canvas.height;\n  t.fillStyle = o, t.fillRect(0, 0, i, r * n), 1 !== n && (t.fillStyle = e, t.fillRect(0, r * n, i, r * (1 - n)));\n}\n\nfunction m({\n  overlayCanvas: t,\n  prevColor: e,\n  nextColor: o,\n  videoEl: n,\n  ovalDetails: i,\n  heightFraction: r,\n  scaleFactor: a\n}) {\n  const {\n    x: h,\n    y: l\n  } = n.getBoundingClientRect(),\n        {\n    flippedCenterX: c,\n    centerY: s,\n    width: d,\n    height: f\n  } = i,\n        g = c * a + h,\n        u = s * a + l,\n        v = t.width,\n        R = t.height,\n        E = t.getContext(\"2d\");\n  if (!E) throw new Error(\"Cannot find Overlay Canvas.\");\n  E.canvas.width = window.innerWidth, E.canvas.height = window.innerHeight, E.clearRect(0, 0, v, R), p({\n    ctx: E,\n    prevColor: e,\n    nextColor: o,\n    fraction: r\n  }), E.save(), E.beginPath(), E.rect(0, 0, v, R), E.clip(), E.clearRect(0, 0, v, R), E.globalAlpha = .9, p({\n    ctx: E,\n    prevColor: e,\n    nextColor: o,\n    fraction: r\n  }), E.beginPath(), E.ellipse(g, u, d * a / 2, f * a / 2, 0, 0, 2 * Math.PI), E.strokeStyle = \"white\", E.lineWidth = 8, E.stroke(), E.clip(), E.clearRect(0, 0, v, R), E.globalAlpha = .75, p({\n    ctx: E,\n    prevColor: e,\n    nextColor: o,\n    fraction: r\n  }), E.restore();\n}\n\nconst M = t => !!t;\n\nfunction w(t) {\n  return (t.Challenge.FaceMovementAndLightChallenge.ColorSequences || []).map(({\n    FreshnessColor: t,\n    DownscrollDuration: e,\n    FlatDisplayDuration: o\n  }) => {\n    const n = t.RGB,\n          i = `rgb(${n[0]},${n[1]},${n[2]})`;\n    return void 0 !== i && void 0 !== e && void 0 !== o ? {\n      color: i,\n      downscrollDuration: e,\n      flatDisplayDuration: o\n    } : void 0;\n  }).filter(M);\n}\n\nfunction O(t) {\n  return t.slice(t.indexOf(\"(\") + 1, t.indexOf(\")\")).split(\",\").map(t => parseInt(t));\n}\n\nfunction A(o, n) {\n  return t(this, void 0, void 0, function* () {\n    let t;\n\n    switch ((yield o.detectFaces(n)).length) {\n      case 0:\n        t = e.CANT_IDENTIFY;\n        break;\n\n      case 1:\n        t = e.FACE_IDENTIFIED;\n        break;\n\n      default:\n        t = e.TOO_MANY;\n    }\n\n    return t;\n  });\n}\n\nfunction T({\n  faceDetector: e,\n  videoEl: o,\n  ovalDetails: n,\n  reduceThreshold: h = !1,\n  isMobile: l = !1\n}) {\n  return t(this, void 0, void 0, function* () {\n    const t = yield e.detectFaces(o);\n    let c,\n        s = !1;\n\n    switch (t.length) {\n      case 0:\n        break;\n\n      case 1:\n        {\n          c = t[0];\n          const e = n.width,\n                {\n            pupilDistance: o,\n            faceHeight: d\n          } = u(c),\n                f = 2;\n          e && (s = (f * o + 1.8 * d) / 2 / f / e < (h ? l ? r : a : i));\n          break;\n        }\n    }\n\n    return s;\n  });\n}\n\nfunction I({\n  deviceHeight: t,\n  deviceWidth: e,\n  height: o,\n  width: n,\n  top: i,\n  left: r\n}) {\n  return {\n    Height: o / t,\n    Width: n / e,\n    Top: i / t,\n    Left: r / e\n  };\n}\n\nexport { C as LivenessErrorStateStringMap, f as drawLivenessOvalInCanvas, R as estimateIllumination, m as fillOverlayCanvasFractional, v as generateBboxFromLandmarks, I as getBoundingBox, w as getColorsSequencesFromSessionInformation, A as getFaceMatchState, g as getFaceMatchStateInLivenessOval, c as getIntersectionOverUnion, l as getOvalBoundingBox, s as getOvalDetailsFromSessionInformation, O as getRGBArrayFromColorString, d as getStaticLivenessOvalDetails, E as isCameraDeviceVirtual, M as isClientFreshnessColorSequence, T as isFaceDistanceBelowThreshold };","map":{"version":3,"names":["__awaiter","t","FaceMatchState","e","IlluminationState","o","LivenessErrorState","n","FACE_DISTANCE_THRESHOLD","i","REDUCED_THRESHOLD_MOBILE","r","REDUCED_THRESHOLD","a","h","l","flippedCenterX","width","centerY","height","ovalBoundingBox","left","top","right","bottom","minOvalX","maxOvalX","minOvalY","maxOvalY","c","Math","max","min","abs","s","sessionInformation","videoWidth","Challenge","FaceMovementAndLightChallenge","OvalParameters","CenterX","CenterY","Width","Height","Error","centerX","d","widthSeed","centerXSeed","centerYSeed","floor","f","g","u","v","R","canvas","oval","scaleFactor","videoEl","getBoundingClientRect","getContext","clearRect","fillStyle","fillRect","videoHeight","x","y","setTransform","beginPath","ellipse","PI","strokeStyle","lineWidth","stroke","clip","ChallengeConfig","OvalIouThreshold","OvalIouHeightThreshold","OvalIouWidthThreshold","FaceIouHeightThreshold","FaceIouWidthThreshold","E","C","p","m","M","w","O","A","T","I","b","S","_","F","D","MATCHED","TOO_CLOSE","TOO_FAR","faceMatchState","faceMatchPercentage","leftEye","rightEye","mouth","pupilDistance","sqrt","pow","faceHeight","nose","document","createElement","drawImage","getImageData","data","Array","fill","length","round","remove","DARK","BRIGHT","NORMAL","label","toLowerCase","includes","RUNTIME_ERROR","SERVER_ERROR","TIMEOUT","FACE_DISTANCE_ERROR","CAMERA_FRAMERATE_ERROR","CAMERA_ACCESS_ERROR","MOBILE_LANDSCAPE_ERROR","FRESHNESS_TIMEOUT","ctx","prevColor","nextColor","fraction","overlayCanvas","ovalDetails","heightFraction","window","innerWidth","innerHeight","save","rect","globalAlpha","restore","ColorSequences","map","FreshnessColor","DownscrollDuration","FlatDisplayDuration","RGB","color","downscrollDuration","flatDisplayDuration","filter","slice","indexOf","split","parseInt","detectFaces","CANT_IDENTIFY","FACE_IDENTIFIED","TOO_MANY","faceDetector","reduceThreshold","isMobile","deviceHeight","deviceWidth","Top","Left","LivenessErrorStateStringMap","drawLivenessOvalInCanvas","estimateIllumination","fillOverlayCanvasFractional","generateBboxFromLandmarks","getBoundingBox","getColorsSequencesFromSessionInformation","getFaceMatchState","getFaceMatchStateInLivenessOval","getIntersectionOverUnion","getOvalBoundingBox","getOvalDetailsFromSessionInformation","getRGBArrayFromColorString","getStaticLivenessOvalDetails","isCameraDeviceVirtual","isClientFreshnessColorSequence","isFaceDistanceBelowThreshold"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-amplify/ui-react-liveness/dist/esm/components/FaceLivenessDetector/service/utils/liveness.mjs"],"sourcesContent":["import{__awaiter as t}from\"tslib\";import{FaceMatchState as e,IlluminationState as o}from\"../types/liveness.mjs\";import{LivenessErrorState as n}from\"../types/error.mjs\";import{FACE_DISTANCE_THRESHOLD as i,REDUCED_THRESHOLD_MOBILE as r,REDUCED_THRESHOLD as a}from\"./constants.mjs\";function h(t,e,o){return t*(o-e)+e}function l(t){const e=t.flippedCenterX-t.width/2,o=t.flippedCenterX+t.width/2,n=t.centerY-t.height/2,i=t.centerY+t.height/2;return{ovalBoundingBox:{left:e,top:n,right:o,bottom:i},minOvalX:e,maxOvalX:o,minOvalY:n,maxOvalY:i}}function c(t,e){const o=Math.max(t.left,e.left),n=Math.max(t.top,e.top),i=Math.min(t.right,e.right),r=Math.min(t.bottom,e.bottom),a=Math.abs(Math.max(0,i-o)*Math.max(0,r-n));if(0===a)return 0;return a/(Math.abs((t.right-t.left)*(t.bottom-t.top))+Math.abs((e.right-e.left)*(e.bottom-e.top))-a)}function s({sessionInformation:t,videoWidth:e}){var o,n;const i=null===(n=null===(o=null==t?void 0:t.Challenge)||void 0===o?void 0:o.FaceMovementAndLightChallenge)||void 0===n?void 0:n.OvalParameters;if(!(i&&i.CenterX&&i.CenterY&&i.Width&&i.Height))throw new Error(\"Oval parameters not returned from session information.\");return{flippedCenterX:e-i.CenterX,centerX:i.CenterX,centerY:i.CenterY,width:i.Width,height:i.Height}}function d({width:t,height:e,widthSeed:o=1,centerXSeed:n=.5,centerYSeed:i=.5}){const r=e;let a=t;const l=.8*o,c=Math.floor(7*t/16),s=Math.floor(9*t/16),d=Math.floor(7*e/16),f=Math.floor(9*e/16),g=h(n,c,s),u=h(i,d,f);t>=e&&(a=3/4*r);const v=l*a,R=1.618*v;return{flippedCenterX:Math.floor(a-g),centerX:Math.floor(g),centerY:Math.floor(u),width:Math.floor(v),height:Math.floor(R)}}function f({canvas:t,oval:e,scaleFactor:o,videoEl:n}){const{flippedCenterX:i,centerY:r,width:a,height:h}=e,{width:l,height:c}=t.getBoundingClientRect(),s=t.getContext(\"2d\");if(!s)throw new Error(\"Cannot find Canvas.\");{s.clearRect(0,0,l,c),s.fillStyle=\"rgba(255, 255, 255, 1.0)\",s.fillRect(0,0,l,c);const t={width:n.videoWidth,height:n.videoHeight},e={x:(l-t.width*o)/2,y:(c-t.height*o)/2};s.setTransform(o,0,0,o,e.x,e.y),s.beginPath(),s.ellipse(i,r,a/2,h/2,0,0,2*Math.PI),s.strokeStyle=\"#AEB3B7\",s.lineWidth=3,s.stroke(),s.clip(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,l,c)}}function g(t,o,n,i){var r,a;let h;const s=null===(a=null===(r=null==i?void 0:i.Challenge)||void 0===r?void 0:r.FaceMovementAndLightChallenge)||void 0===a?void 0:a.ChallengeConfig;if(!(s&&s.OvalIouThreshold&&s.OvalIouHeightThreshold&&s.OvalIouWidthThreshold&&s.FaceIouHeightThreshold&&s.FaceIouWidthThreshold))throw new Error(\"Challenge information not returned from session information.\");const{OvalIouThreshold:d,OvalIouHeightThreshold:f,OvalIouWidthThreshold:g,FaceIouHeightThreshold:u,FaceIouWidthThreshold:R}=s,E=v(t,o),C=E.left,p=E.right,m=E.top,M=E.bottom,{ovalBoundingBox:w,minOvalX:O,minOvalY:A,maxOvalX:T,maxOvalY:I}=l(o),x=c(E,w),b=d,S=o.width*g,_=o.height*f,F=o.width*R,D=o.height*u,y=100*Math.max(Math.min(1,.75*(x-n)/(b-n)+.25),0);return h=x>b&&Math.abs(O-C)<S&&Math.abs(T-p)<S&&Math.abs(I-M)<_?e.MATCHED:A-m>D||M-I>D||O-C>F&&p-T>F?e.TOO_CLOSE:e.TOO_FAR,{faceMatchState:h,faceMatchPercentage:y}}function u(t){const{leftEye:e,rightEye:o,mouth:n}=t,i=[];i[0]=(e[0]+o[0])/2,i[1]=(e[1]+o[1])/2;return{pupilDistance:Math.sqrt(Math.pow(e[0]-o[0],2)+Math.pow(e[1]-o[1],2)),faceHeight:Math.sqrt(Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2))}}function v(t,e){const{leftEye:o,rightEye:n,nose:i}=t,{height:r,centerY:a}=e,h=a-r/2,l=[];l[0]=(o[0]+n[0])/2,l[1]=(o[1]+n[1])/2;const{pupilDistance:c,faceHeight:s}=u(t),d=(2*c+1.8*s)/2,f=1.618*d;let g,v;l[1]<=(h+r)/2?(g=(l[0]+i[0])/2,v=(l[1]+i[1])/2):(g=l[0],v=l[1]);const R=g-d/2,E=v-f/2;return{left:R,top:E,right:R+d,bottom:E+f}}function R(t){const e=document.createElement(\"canvas\");e.width=t.videoWidth,e.height=t.videoHeight;const n=e.getContext(\"2d\");if(n){n.drawImage(t,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height).data,r=8,a=new Array(r).fill(0);for(let t=0;t<i.length;t++){a[Math.round(.2126*i[t++]+.7152*i[t++]+.0722*i[t++])%32]++}let h=-1,l=0;for(let t=0;t<r;t++)a[t]>l&&(l=a[t],h=t);return e.remove(),0===h?o.DARK:h===r?o.BRIGHT:o.NORMAL}throw new Error(\"Cannot find Video Element.\")}function E(t){return t.label.toLowerCase().includes(\"virtual\")}const C={[n.RUNTIME_ERROR]:\"RUNTIME_ERROR\",[n.SERVER_ERROR]:\"SERVER_ERROR\",[n.TIMEOUT]:\"TIMEOUT\",[n.FACE_DISTANCE_ERROR]:\"FACE_DISTANCE_ERROR\",[n.CAMERA_FRAMERATE_ERROR]:\"CAMERA_FRAMERATE_ERROR\",[n.CAMERA_ACCESS_ERROR]:\"CAMERA_ACCESS_ERROR\",[n.MOBILE_LANDSCAPE_ERROR]:\"MOBILE_LANDSCAPE_ERROR\",[n.FRESHNESS_TIMEOUT]:\"FRESHNESS_TIMEOUT\"};function p({ctx:t,prevColor:e,nextColor:o,fraction:n}){const i=t.canvas.width,r=t.canvas.height;t.fillStyle=o,t.fillRect(0,0,i,r*n),1!==n&&(t.fillStyle=e,t.fillRect(0,r*n,i,r*(1-n)))}function m({overlayCanvas:t,prevColor:e,nextColor:o,videoEl:n,ovalDetails:i,heightFraction:r,scaleFactor:a}){const{x:h,y:l}=n.getBoundingClientRect(),{flippedCenterX:c,centerY:s,width:d,height:f}=i,g=c*a+h,u=s*a+l,v=t.width,R=t.height,E=t.getContext(\"2d\");if(!E)throw new Error(\"Cannot find Overlay Canvas.\");E.canvas.width=window.innerWidth,E.canvas.height=window.innerHeight,E.clearRect(0,0,v,R),p({ctx:E,prevColor:e,nextColor:o,fraction:r}),E.save(),E.beginPath(),E.rect(0,0,v,R),E.clip(),E.clearRect(0,0,v,R),E.globalAlpha=.9,p({ctx:E,prevColor:e,nextColor:o,fraction:r}),E.beginPath(),E.ellipse(g,u,d*a/2,f*a/2,0,0,2*Math.PI),E.strokeStyle=\"white\",E.lineWidth=8,E.stroke(),E.clip(),E.clearRect(0,0,v,R),E.globalAlpha=.75,p({ctx:E,prevColor:e,nextColor:o,fraction:r}),E.restore()}const M=t=>!!t;function w(t){return(t.Challenge.FaceMovementAndLightChallenge.ColorSequences||[]).map((({FreshnessColor:t,DownscrollDuration:e,FlatDisplayDuration:o})=>{const n=t.RGB,i=`rgb(${n[0]},${n[1]},${n[2]})`;return void 0!==i&&void 0!==e&&void 0!==o?{color:i,downscrollDuration:e,flatDisplayDuration:o}:void 0})).filter(M)}function O(t){return t.slice(t.indexOf(\"(\")+1,t.indexOf(\")\")).split(\",\").map((t=>parseInt(t)))}function A(o,n){return t(this,void 0,void 0,(function*(){let t;switch((yield o.detectFaces(n)).length){case 0:t=e.CANT_IDENTIFY;break;case 1:t=e.FACE_IDENTIFIED;break;default:t=e.TOO_MANY}return t}))}function T({faceDetector:e,videoEl:o,ovalDetails:n,reduceThreshold:h=!1,isMobile:l=!1}){return t(this,void 0,void 0,(function*(){const t=yield e.detectFaces(o);let c,s=!1;switch(t.length){case 0:break;case 1:{c=t[0];const e=n.width,{pupilDistance:o,faceHeight:d}=u(c),f=2;e&&(s=(f*o+1.8*d)/2/f/e<(h?l?r:a:i));break}}return s}))}function I({deviceHeight:t,deviceWidth:e,height:o,width:n,top:i,left:r}){return{Height:o/t,Width:n/e,Top:i/t,Left:r/e}}export{C as LivenessErrorStateStringMap,f as drawLivenessOvalInCanvas,R as estimateIllumination,m as fillOverlayCanvasFractional,v as generateBboxFromLandmarks,I as getBoundingBox,w as getColorsSequencesFromSessionInformation,A as getFaceMatchState,g as getFaceMatchStateInLivenessOval,c as getIntersectionOverUnion,l as getOvalBoundingBox,s as getOvalDetailsFromSessionInformation,O as getRGBArrayFromColorString,d as getStaticLivenessOvalDetails,E as isCameraDeviceVirtual,M as isClientFreshnessColorSequence,T as isFaceDistanceBelowThreshold};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}