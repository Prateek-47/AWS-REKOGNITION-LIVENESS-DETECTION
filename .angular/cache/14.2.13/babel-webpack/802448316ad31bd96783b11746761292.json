{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { __awaiter, __generator } from \"tslib\";\nimport { delegate } from '../vendor/dom-utils';\nimport { ConsoleLogger as Logger, browserOrNode } from '@aws-amplify/core';\nvar logger = new Logger('EventTracker');\nvar defaultOpts = {\n  enable: false,\n  events: ['click'],\n  selectorPrefix: 'data-amplify-analytics-',\n  provider: 'AWSPinpoint'\n};\n\nvar EventTracker =\n/** @class */\nfunction () {\n  function EventTracker(tracker, opts) {\n    if (!browserOrNode().isBrowser || !window.addEventListener) {\n      logger.debug('not in the supported web environment');\n      return;\n    }\n\n    this._config = Object.assign({}, defaultOpts, opts);\n    this._tracker = tracker;\n    this._delegates = {};\n    this._trackFunc = this._trackFunc.bind(this);\n    logger.debug('initialize pageview tracker with opts', this._config);\n    this.configure(this._config);\n  }\n\n  EventTracker.prototype.configure = function (opts) {\n    var _this = this;\n\n    Object.assign(this._config, opts);\n\n    if (!this._config.enable) {\n      Object.keys(this._delegates).forEach(function (key) {\n        if (typeof _this._delegates[key].destroy === 'function') _this._delegates[key].destroy();\n      });\n      this._delegates = {};\n    } else if (this._config.enable && Object.keys(this._delegates).length === 0) {\n      var selector_1 = '[' + this._config.selectorPrefix + 'on]';\n\n      this._config.events.forEach(function (evt) {\n        _this._delegates[evt] = delegate(document, evt, selector_1, _this._trackFunc, {\n          composed: true,\n          useCapture: true\n        });\n      });\n    }\n\n    return this._config;\n  };\n\n  EventTracker.prototype._trackFunc = function (event, element) {\n    return __awaiter(this, void 0, void 0, function () {\n      var customAttrs, events, eventName, attrs, defaultAttrs, _a, attributes;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            customAttrs = {};\n            events = element.getAttribute(this._config.selectorPrefix + 'on').split(/\\s*,\\s*/);\n            eventName = element.getAttribute(this._config.selectorPrefix + 'name');\n            attrs = element.getAttribute(this._config.selectorPrefix + 'attrs');\n\n            if (attrs) {\n              attrs.split(/\\s*,\\s*/).forEach(function (attr) {\n                var tmp = attr.trim().split(/\\s*:\\s*/);\n                customAttrs[tmp[0]] = tmp[1];\n              });\n            }\n\n            if (!(typeof this._config.attributes === 'function')) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , this._config.attributes()];\n\n          case 1:\n            _a = _b.sent();\n            return [3\n            /*break*/\n            , 3];\n\n          case 2:\n            _a = this._config.attributes;\n            _b.label = 3;\n\n          case 3:\n            defaultAttrs = _a;\n            attributes = Object.assign({\n              type: event.type,\n              target: event.target.localName + \" with id \" + event.target.id\n            }, defaultAttrs, customAttrs);\n            logger.debug('events needed to be recorded', events);\n            logger.debug('attributes needed to be attached', customAttrs);\n\n            if (events.indexOf(event.type) < 0) {\n              logger.debug(\"event \" + event.type + \" is not selected to be recorded\");\n              return [2\n              /*return*/\n              ];\n            }\n\n            this._tracker({\n              name: eventName || 'event',\n              attributes: attributes\n            }, this._config.provider).catch(function (e) {\n              logger.debug(\"Failed to record the \" + event.type + \" event', \" + e);\n            });\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return EventTracker;\n}();\n\nexport { EventTracker };","map":{"version":3,"names":["__awaiter","__generator","delegate","ConsoleLogger","Logger","browserOrNode","logger","defaultOpts","enable","events","selectorPrefix","provider","EventTracker","tracker","opts","isBrowser","window","addEventListener","debug","_config","Object","assign","_tracker","_delegates","_trackFunc","bind","configure","prototype","_this","keys","forEach","key","destroy","length","selector_1","evt","document","composed","useCapture","event","element","customAttrs","eventName","attrs","defaultAttrs","_a","attributes","_b","label","getAttribute","split","attr","tmp","trim","sent","type","target","localName","id","indexOf","name","catch","e"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-amplify/analytics/lib-esm/trackers/EventTracker.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { __awaiter, __generator } from \"tslib\";\nimport { delegate } from '../vendor/dom-utils';\nimport { ConsoleLogger as Logger, browserOrNode } from '@aws-amplify/core';\nvar logger = new Logger('EventTracker');\nvar defaultOpts = {\n    enable: false,\n    events: ['click'],\n    selectorPrefix: 'data-amplify-analytics-',\n    provider: 'AWSPinpoint',\n};\nvar EventTracker = /** @class */ (function () {\n    function EventTracker(tracker, opts) {\n        if (!browserOrNode().isBrowser || !window.addEventListener) {\n            logger.debug('not in the supported web environment');\n            return;\n        }\n        this._config = Object.assign({}, defaultOpts, opts);\n        this._tracker = tracker;\n        this._delegates = {};\n        this._trackFunc = this._trackFunc.bind(this);\n        logger.debug('initialize pageview tracker with opts', this._config);\n        this.configure(this._config);\n    }\n    EventTracker.prototype.configure = function (opts) {\n        var _this = this;\n        Object.assign(this._config, opts);\n        if (!this._config.enable) {\n            Object.keys(this._delegates).forEach(function (key) {\n                if (typeof _this._delegates[key].destroy === 'function')\n                    _this._delegates[key].destroy();\n            });\n            this._delegates = {};\n        }\n        else if (this._config.enable &&\n            Object.keys(this._delegates).length === 0) {\n            var selector_1 = '[' + this._config.selectorPrefix + 'on]';\n            this._config.events.forEach(function (evt) {\n                _this._delegates[evt] = delegate(document, evt, selector_1, _this._trackFunc, { composed: true, useCapture: true });\n            });\n        }\n        return this._config;\n    };\n    EventTracker.prototype._trackFunc = function (event, element) {\n        return __awaiter(this, void 0, void 0, function () {\n            var customAttrs, events, eventName, attrs, defaultAttrs, _a, attributes;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        customAttrs = {};\n                        events = element\n                            .getAttribute(this._config.selectorPrefix + 'on')\n                            .split(/\\s*,\\s*/);\n                        eventName = element.getAttribute(this._config.selectorPrefix + 'name');\n                        attrs = element.getAttribute(this._config.selectorPrefix + 'attrs');\n                        if (attrs) {\n                            attrs.split(/\\s*,\\s*/).forEach(function (attr) {\n                                var tmp = attr.trim().split(/\\s*:\\s*/);\n                                customAttrs[tmp[0]] = tmp[1];\n                            });\n                        }\n                        if (!(typeof this._config.attributes === 'function')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this._config.attributes()];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = this._config.attributes;\n                        _b.label = 3;\n                    case 3:\n                        defaultAttrs = _a;\n                        attributes = Object.assign({\n                            type: event.type,\n                            target: event.target.localName + \" with id \" + event.target.id,\n                        }, defaultAttrs, customAttrs);\n                        logger.debug('events needed to be recorded', events);\n                        logger.debug('attributes needed to be attached', customAttrs);\n                        if (events.indexOf(event.type) < 0) {\n                            logger.debug(\"event \" + event.type + \" is not selected to be recorded\");\n                            return [2 /*return*/];\n                        }\n                        this._tracker({\n                            name: eventName || 'event',\n                            attributes: attributes,\n                        }, this._config.provider).catch(function (e) {\n                            logger.debug(\"Failed to record the \" + event.type + \" event', \" + e);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return EventTracker;\n}());\nexport { EventTracker };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}