{"ast":null,"code":"import * as e from \"react\";\nimport { Flex as t, Text as r, Button as s, View as i } from \"@aws-amplify/ui-react\";\nimport \"../service/machine/index.mjs\";\nimport \"../service/types/liveness.mjs\";\nimport { LivenessErrorState as o } from \"../service/types/error.mjs\";\nimport \"tslib\";\nimport \"@tensorflow/tfjs-core\";\nimport \"@tensorflow-models/blazeface\";\nimport \"@tensorflow/tfjs-backend-wasm\";\nimport \"@tensorflow/tfjs-backend-cpu\";\nimport \"@aws-amplify/core\";\nimport \"../service/utils/liveness.mjs\";\nimport \"../service/utils/streamProvider.mjs\";\nimport \"../service/utils/freshnessColorDisplay.mjs\";\nimport { LivenessCameraModule as a } from \"./LivenessCameraModule.mjs\";\nimport { useLivenessActor as n } from \"../hooks/useLivenessActor.mjs\";\nimport { useLivenessSelector as m, createLivenessSelector as c } from \"../hooks/useLivenessSelector.mjs\";\nimport \"@aws-amplify/ui\";\nimport { isMobileScreen as p, getLandscapeMediaQuery as l } from \"../utils/device.mjs\";\nimport { CancelButton as d } from \"../shared/CancelButton.mjs\";\nimport { defaultErrorDisplayText as u } from \"../displayText.mjs\";\nimport { LandscapeErrorModal as f } from \"../shared/LandscapeErrorModal.mjs\";\n\nconst E = \"liveness-detector-check\",\n      g = c(e => e.context.errorState),\n      y = c(e => e.context.isRecordingStopped),\n      x = ({\n  hintDisplayText: c,\n  cameraDisplayText: x,\n  streamDisplayText: h,\n  errorDisplayText: R,\n  components: T\n}) => {\n  const [A, j] = n(),\n        v = m(g),\n        C = m(y),\n        M = A.matches(\"permissionDenied\"),\n        b = p(),\n        L = () => {\n    j({\n      type: \"RETRY_CAMERA_CHECK\"\n    });\n  },\n        {\n    cameraMinSpecificationsHeadingText: k,\n    cameraMinSpecificationsMessageText: D,\n    cameraNotFoundHeadingText: w,\n    cameraNotFoundMessageText: S,\n    retryCameraPermissionsText: _\n  } = x,\n        {\n    cancelLivenessCheckText: N\n  } = h;\n\n  e.useLayoutEffect(() => {\n    if (b) {\n      const e = e => {\n        e && j({\n          type: \"MOBILE_LANDSCAPE_WARNING\"\n        });\n      },\n            t = l();\n\n      return e(t.matches), t.addEventListener(\"change\", t => {\n        e(t.matches);\n      }), () => {\n        t.removeEventListener(\"change\", t => e(t.matches));\n      };\n    }\n  }, [b, j]);\n  return e.createElement(t, {\n    direction: \"column\",\n    position: \"relative\",\n    testId: E,\n    className: E\n  }, (() => {\n    if (v === o.MOBILE_LANDSCAPE_ERROR) {\n      const r = Object.assign(Object.assign({}, u), R),\n            {\n        landscapeHeaderText: s,\n        portraitMessageText: i,\n        landscapeMessageText: o,\n        tryAgainText: a\n      } = r;\n      return e.createElement(t, {\n        backgroundColor: \"background.primary\",\n        direction: \"column\",\n        textAlign: \"center\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        position: \"absolute\",\n        width: \"100%\"\n      }, e.createElement(f, {\n        header: s,\n        portraitMessage: i,\n        landscapeMessage: o,\n        tryAgainText: a,\n        onRetry: () => {\n          j({\n            type: \"CANCEL\"\n          });\n        }\n      }));\n    }\n\n    return M ? e.createElement(t, {\n      backgroundColor: \"background.primary\",\n      direction: \"column\",\n      textAlign: \"center\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      width: \"100%\",\n      height: 480\n    }, e.createElement(r, {\n      fontSize: \"large\",\n      fontWeight: \"bold\"\n    }, v === o.CAMERA_FRAMERATE_ERROR ? k : w), e.createElement(r, {\n      maxWidth: 300\n    }, v === o.CAMERA_FRAMERATE_ERROR ? D : S), e.createElement(s, {\n      variation: \"primary\",\n      type: \"button\",\n      onClick: L\n    }, _), e.createElement(i, {\n      position: \"absolute\",\n      top: \"medium\",\n      right: \"medium\"\n    }, e.createElement(d, {\n      ariaLabel: N\n    }))) : e.createElement(a, {\n      isMobileScreen: b,\n      isRecordingStopped: C,\n      streamDisplayText: h,\n      hintDisplayText: c,\n      errorDisplayText: R,\n      components: T\n    });\n  })());\n};\n\nexport { x as LivenessCheck, g as selectErrorState, y as selectIsRecordingStopped };","map":{"version":3,"names":["e","Flex","t","Text","r","Button","s","View","i","LivenessErrorState","o","LivenessCameraModule","a","useLivenessActor","n","useLivenessSelector","m","createLivenessSelector","c","isMobileScreen","p","getLandscapeMediaQuery","l","CancelButton","d","defaultErrorDisplayText","u","LandscapeErrorModal","f","E","g","context","errorState","y","isRecordingStopped","x","hintDisplayText","cameraDisplayText","streamDisplayText","h","errorDisplayText","R","components","T","A","j","v","C","M","matches","b","L","type","cameraMinSpecificationsHeadingText","k","cameraMinSpecificationsMessageText","D","cameraNotFoundHeadingText","w","cameraNotFoundMessageText","S","retryCameraPermissionsText","_","cancelLivenessCheckText","N","useLayoutEffect","addEventListener","removeEventListener","createElement","direction","position","testId","className","MOBILE_LANDSCAPE_ERROR","Object","assign","landscapeHeaderText","portraitMessageText","landscapeMessageText","tryAgainText","backgroundColor","textAlign","alignItems","justifyContent","width","header","portraitMessage","landscapeMessage","onRetry","height","fontSize","fontWeight","CAMERA_FRAMERATE_ERROR","maxWidth","variation","onClick","top","right","ariaLabel","LivenessCheck","selectErrorState","selectIsRecordingStopped"],"sources":["D:/aws-rekognition-liveness-detection-main/node_modules/@aws-amplify/ui-react-liveness/dist/esm/components/FaceLivenessDetector/LivenessCheck/LivenessCheck.mjs"],"sourcesContent":["import*as e from\"react\";import{Flex as t,Text as r,Button as s,View as i}from\"@aws-amplify/ui-react\";import\"../service/machine/index.mjs\";import\"../service/types/liveness.mjs\";import{LivenessErrorState as o}from\"../service/types/error.mjs\";import\"tslib\";import\"@tensorflow/tfjs-core\";import\"@tensorflow-models/blazeface\";import\"@tensorflow/tfjs-backend-wasm\";import\"@tensorflow/tfjs-backend-cpu\";import\"@aws-amplify/core\";import\"../service/utils/liveness.mjs\";import\"../service/utils/streamProvider.mjs\";import\"../service/utils/freshnessColorDisplay.mjs\";import{LivenessCameraModule as a}from\"./LivenessCameraModule.mjs\";import{useLivenessActor as n}from\"../hooks/useLivenessActor.mjs\";import{useLivenessSelector as m,createLivenessSelector as c}from\"../hooks/useLivenessSelector.mjs\";import\"@aws-amplify/ui\";import{isMobileScreen as p,getLandscapeMediaQuery as l}from\"../utils/device.mjs\";import{CancelButton as d}from\"../shared/CancelButton.mjs\";import{defaultErrorDisplayText as u}from\"../displayText.mjs\";import{LandscapeErrorModal as f}from\"../shared/LandscapeErrorModal.mjs\";const E=\"liveness-detector-check\",g=c((e=>e.context.errorState)),y=c((e=>e.context.isRecordingStopped)),x=({hintDisplayText:c,cameraDisplayText:x,streamDisplayText:h,errorDisplayText:R,components:T})=>{const[A,j]=n(),v=m(g),C=m(y),M=A.matches(\"permissionDenied\"),b=p(),L=()=>{j({type:\"RETRY_CAMERA_CHECK\"})},{cameraMinSpecificationsHeadingText:k,cameraMinSpecificationsMessageText:D,cameraNotFoundHeadingText:w,cameraNotFoundMessageText:S,retryCameraPermissionsText:_}=x,{cancelLivenessCheckText:N}=h;e.useLayoutEffect((()=>{if(b){const e=e=>{e&&j({type:\"MOBILE_LANDSCAPE_WARNING\"})},t=l();return e(t.matches),t.addEventListener(\"change\",(t=>{e(t.matches)})),()=>{t.removeEventListener(\"change\",(t=>e(t.matches)))}}}),[b,j]);return e.createElement(t,{direction:\"column\",position:\"relative\",testId:E,className:E},(()=>{if(v===o.MOBILE_LANDSCAPE_ERROR){const r=Object.assign(Object.assign({},u),R),{landscapeHeaderText:s,portraitMessageText:i,landscapeMessageText:o,tryAgainText:a}=r;return e.createElement(t,{backgroundColor:\"background.primary\",direction:\"column\",textAlign:\"center\",alignItems:\"center\",justifyContent:\"center\",position:\"absolute\",width:\"100%\"},e.createElement(f,{header:s,portraitMessage:i,landscapeMessage:o,tryAgainText:a,onRetry:()=>{j({type:\"CANCEL\"})}}))}return M?e.createElement(t,{backgroundColor:\"background.primary\",direction:\"column\",textAlign:\"center\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",height:480},e.createElement(r,{fontSize:\"large\",fontWeight:\"bold\"},v===o.CAMERA_FRAMERATE_ERROR?k:w),e.createElement(r,{maxWidth:300},v===o.CAMERA_FRAMERATE_ERROR?D:S),e.createElement(s,{variation:\"primary\",type:\"button\",onClick:L},_),e.createElement(i,{position:\"absolute\",top:\"medium\",right:\"medium\"},e.createElement(d,{ariaLabel:N}))):e.createElement(a,{isMobileScreen:b,isRecordingStopped:C,streamDisplayText:h,hintDisplayText:c,errorDisplayText:R,components:T})})())};export{x as LivenessCheck,g as selectErrorState,y as selectIsRecordingStopped};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}